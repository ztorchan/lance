
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Open Lakehouse Format for Multimodal AI">
      
      
      
        <link rel="canonical" href="https://lance.org/format/table/mem_wal/">
      
      
        <link rel="prev" href="../row_id_lineage/">
      
      
        <link rel="next" href="../index/">
      
      
        
      
      
      <link rel="icon" href="../../../logo/logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>MemTable & WAL - Lance</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/termynal.css">
    
      <link rel="stylesheet" href="../../../assets/stylesheets/home.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#memtable-wal-specification-experimental" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Lance" class="md-header__button md-logo" aria-label="Lance" data-md-component="logo">
      
  <img src="../../../logo/white.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Lance
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              MemTable & WAL
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/lance-format/lance" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    lance-format/lance
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../quickstart/" class="md-tabs__link">
          
  
  
    
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../guide/read_and_write/" class="md-tabs__link">
          
  
  
    
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
    
  
  Specification

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../examples/python/llm_dataset_creation/" class="md-tabs__link">
          
  
  
    
  
  Examples

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../integrations/datafusion/" class="md-tabs__link">
          
  
  
    
  
  Integrations

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../community/" class="md-tabs__link">
          
  
  
    
  
  Community

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../sdk_docs/" class="md-tabs__link">
        
  
  
    
  
  SDK Docs

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Lance" class="md-nav__button md-logo" aria-label="Lance" data-md-component="logo">
      
  <img src="../../../logo/white.png" alt="logo">

    </a>
    Lance
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/lance-format/lance" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    lance-format/lance
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../quickstart/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../quickstart/versioning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Versioning
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../quickstart/vector-search/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Vector Search
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    User Guide
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    User Guide
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../guide/read_and_write/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Read and Write
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../guide/data_evolution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Data Evolution
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../guide/blob/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Blob API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../guide/json/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    JSON Support
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../guide/tags/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tags
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../guide/object_store/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Object Store Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../guide/distributed_write/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Distributed Write
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../guide/migration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Migration Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../guide/performance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Performance Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../guide/tokenizer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tokenizer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../guide/arrays/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Extension Arrays
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Specification
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Specification
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../file/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    File Format
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_2" id="__nav_4_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    File Format
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../file/encoding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Encoding Strategy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../file/versioning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Versioning
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Table Format
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_3" id="__nav_4_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Table Format
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../versioning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Versioning
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../transaction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Transactions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../layout/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Layout
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../branch_tag/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Branch & Tag
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../row_id_lineage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Row ID & Lineage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    MemTable & WAL
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    MemTable & WAL
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overall-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overall Architecture
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Overall Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#base-table" class="md-nav__link">
    <span class="md-ellipsis">
      
        Base Table
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#region" class="md-nav__link">
    <span class="md-ellipsis">
      
        Region
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memwal-index" class="md-nav__link">
    <span class="md-ellipsis">
      
        MemWAL Index
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#region-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        Region Architecture
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Region Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#memtable" class="md-nav__link">
    <span class="md-ellipsis">
      
        MemTable
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wal" class="md-nav__link">
    <span class="md-ellipsis">
      
        WAL
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flushed-memtable" class="md-nav__link">
    <span class="md-ellipsis">
      
        Flushed MemTable
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#region-manifest" class="md-nav__link">
    <span class="md-ellipsis">
      
        Region Manifest
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#memwal-index-details" class="md-nav__link">
    <span class="md-ellipsis">
      
        MemWAL Index Details
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MemWAL Index Details">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#index-details" class="md-nav__link">
    <span class="md-ellipsis">
      
        Index Details
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#region-identifier" class="md-nav__link">
    <span class="md-ellipsis">
      
        Region Identifier
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#region-spec" class="md-nav__link">
    <span class="md-ellipsis">
      
        Region Spec
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Region Spec">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#region-expression" class="md-nav__link">
    <span class="md-ellipsis">
      
        Region Expression
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#region-transform" class="md-nav__link">
    <span class="md-ellipsis">
      
        Region Transform
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#region-snapshot-storage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Region Snapshot Storage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#region-snapshot-arrow-schema" class="md-nav__link">
    <span class="md-ellipsis">
      
        Region Snapshot Arrow Schema
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vector-index-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Vector Index Configuration
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storage-layout" class="md-nav__link">
    <span class="md-ellipsis">
      
        Storage Layout
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writer-expectations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Writer Expectations
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Writer Expectations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#writer-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Writer Configuration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synchronous-vs-asynchronous-operations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Synchronous vs Asynchronous Operations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initialization-recovery" class="md-nav__link">
    <span class="md-ellipsis">
      
        Initialization &amp; Recovery
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#write-operations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Write Operations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wal-flush" class="md-nav__link">
    <span class="md-ellipsis">
      
        WAL Flush
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memtable-indexing" class="md-nav__link">
    <span class="md-ellipsis">
      
        MemTable Indexing
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wal-fragment-mapping-construction" class="md-nav__link">
    <span class="md-ellipsis">
      
        WAL Fragment Mapping Construction
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memtable-flush" class="md-nav__link">
    <span class="md-ellipsis">
      
        MemTable Flush
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#writer-fencing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Writer Fencing
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#background-job-expectations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Background Job Expectations
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Background Job Expectations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#memtable-merger" class="md-nav__link">
    <span class="md-ellipsis">
      
        MemTable Merger
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MemTable Merger">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#merge-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Merge Workflow
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conflict-resolution-and-concurrency" class="md-nav__link">
    <span class="md-ellipsis">
      
        Conflict Resolution and Concurrency
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memwal-index-builder" class="md-nav__link">
    <span class="md-ellipsis">
      
        MemWAL Index Builder
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#base-table-index-builder" class="md-nav__link">
    <span class="md-ellipsis">
      
        Base Table Index Builder
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#garbage-collector" class="md-nav__link">
    <span class="md-ellipsis">
      
        Garbage Collector
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reader-expectations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Reader Expectations
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Reader Expectations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lsm-tree-merging-read" class="md-nav__link">
    <span class="md-ellipsis">
      
        LSM Tree Merging Read
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reader-consistency" class="md-nav__link">
    <span class="md-ellipsis">
      
        Reader Consistency
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#query-planning" class="md-nav__link">
    <span class="md-ellipsis">
      
        Query Planning
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Query Planning">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#memtable-collection" class="md-nav__link">
    <span class="md-ellipsis">
      
        MemTable Collection
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#region-pruning" class="md-nav__link">
    <span class="md-ellipsis">
      
        Region Pruning
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#indexed-read-plan" class="md-nav__link">
    <span class="md-ellipsis">
      
        Indexed Read Plan
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#query-execution" class="md-nav__link">
    <span class="md-ellipsis">
      
        Query Execution
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Query Execution">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scan-queries" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scan Queries
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#point-lookups" class="md-nav__link">
    <span class="md-ellipsis">
      
        Point Lookups
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vector-search-queries" class="md-nav__link">
    <span class="md-ellipsis">
      
        Vector Search Queries
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#full-text-search-queries" class="md-nav__link">
    <span class="md-ellipsis">
      
        Full-Text Search Queries
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendices" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appendices
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Appendices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#appendix-1-writer-fencing-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appendix 1: Writer Fencing Example
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Appendix 1: Writer Fencing Example">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initial-state" class="md-nav__link">
    <span class="md-ellipsis">
      
        Initial State
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scenario" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scenario
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-happens-to-writer-as-wal-entries" class="md-nav__link">
    <span class="md-ellipsis">
      
        What Happens to Writer A's WAL Entries?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#key-points" class="md-nav__link">
    <span class="md-ellipsis">
      
        Key Points
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#appendix-2-concurrent-merger-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appendix 2: Concurrent Merger Example
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Appendix 2: Concurrent Merger Example">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initial-state_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Initial State
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scenario-1-racing-on-the-same-generation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scenario 1: Racing on the Same Generation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scenario-2-crash-after-table-commit" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scenario 2: Crash After Table Commit
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#key-points_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Key Points
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#appendix-3-execution-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appendix 3: Execution Nodes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Appendix 3: Execution Nodes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deduplicateexec" class="md-nav__link">
    <span class="md-ellipsis">
      
        DeduplicateExec
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#takelastexec" class="md-nav__link">
    <span class="md-ellipsis">
      
        TakeLastExec
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#coalescefirstexec" class="md-nav__link">
    <span class="md-ellipsis">
      
        CoalesceFirstExec
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filterstaleexec" class="md-nav__link">
    <span class="md-ellipsis">
      
        FilterStaleExec
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bloomfilterguardexec" class="md-nav__link">
    <span class="md-ellipsis">
      
        BloomFilterGuardExec
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#appendix-4-index-catchup-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appendix 4: Index Catchup Example
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Appendix 4: Index Catchup Example">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scenario-setup" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scenario Setup
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-read-strategy-for-vector-search" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example Read Strategy for Vector Search
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../index/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Index
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_3_8" id="__nav_4_3_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Index
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_8_2" >
        
          
          <label class="md-nav__link" for="__nav_4_3_8_2" id="__nav_4_3_8_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Scalar Indices
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_3_8_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_8_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Scalar Indices
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../index/scalar/btree/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    BTree
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../index/scalar/bitmap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Bitmap
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../index/scalar/label_list/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Label List
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../index/scalar/zonemap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Zone Map
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../index/scalar/bloom_filter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Bloom Filter
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../index/scalar/fts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Full Text Search
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../index/scalar/ngram/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    N-gram
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../index/scalar/rtree/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RTree
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_8_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../index/vector/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Vector Indices
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_3_8_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_8_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Vector Indices
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_8_4" >
        
          
          <label class="md-nav__link" for="__nav_4_3_8_4" id="__nav_4_3_8_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    System Indices
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_3_8_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_8_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    System Indices
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../index/system/frag_reuse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fragment Reuse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../index/system/mem_wal/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MemWAL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../namespace/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Namespace Spec
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_4" id="__nav_4_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Namespace Spec
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../namespace/client/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Client Spec
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_4_2" id="__nav_4_4_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Client Spec
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/object-relationship/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Objects & Relationships
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4_2_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../namespace/client/operations/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Operations
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_4_2_3" id="__nav_4_4_2_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_4_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4_2_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Operations
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/errors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Errors
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4_2_3_3" >
        
          
          <label class="md-nav__link" for="__nav_4_4_2_3_3" id="__nav_4_4_2_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Models
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_4_4_2_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4_2_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Models
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/AddVirtualColumnEntry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AddVirtualColumnEntry
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/AlterColumnsEntry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AlterColumnsEntry
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/AlterTableAddColumnsRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AlterTableAddColumnsRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/AlterTableAddColumnsResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AlterTableAddColumnsResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/AlterTableAlterColumnsRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AlterTableAlterColumnsRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/AlterTableAlterColumnsResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AlterTableAlterColumnsResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/AlterTableDropColumnsRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AlterTableDropColumnsRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/AlterTableDropColumnsResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AlterTableDropColumnsResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/AlterTransactionAction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AlterTransactionAction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/AlterTransactionRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AlterTransactionRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/AlterTransactionResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AlterTransactionResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/AlterTransactionSetProperty/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AlterTransactionSetProperty
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/AlterTransactionSetStatus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AlterTransactionSetStatus
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/AlterTransactionUnsetProperty/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AlterTransactionUnsetProperty
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/AlterVirtualColumnEntry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AlterVirtualColumnEntry
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/AnalyzeTableQueryPlanRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AnalyzeTableQueryPlanRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/AnalyzeTableQueryPlanResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AnalyzeTableQueryPlanResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/BooleanQuery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    BooleanQuery
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/BoostQuery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    BoostQuery
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/CountTableRowsRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CountTableRowsRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/CreateEmptyTableRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CreateEmptyTableRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/CreateEmptyTableResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CreateEmptyTableResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/CreateNamespaceRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CreateNamespaceRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/CreateNamespaceResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CreateNamespaceResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/CreateTableIndexRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CreateTableIndexRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/CreateTableIndexResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CreateTableIndexResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/CreateTableRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CreateTableRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/CreateTableResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CreateTableResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/CreateTableScalarIndexResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CreateTableScalarIndexResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/CreateTableTagRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CreateTableTagRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/CreateTableTagResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CreateTableTagResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/DeclareTableRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DeclareTableRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/DeclareTableResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DeclareTableResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/DeleteFromTableRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DeleteFromTableRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/DeleteFromTableResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DeleteFromTableResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/DeleteTableTagRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DeleteTableTagRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/DeleteTableTagResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DeleteTableTagResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/DeregisterTableRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DeregisterTableRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/DeregisterTableResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DeregisterTableResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/DescribeNamespaceRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DescribeNamespaceRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/DescribeNamespaceResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DescribeNamespaceResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/DescribeTableIndexStatsRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DescribeTableIndexStatsRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/DescribeTableIndexStatsResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DescribeTableIndexStatsResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/DescribeTableRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DescribeTableRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/DescribeTableResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DescribeTableResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/DescribeTransactionRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DescribeTransactionRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/DescribeTransactionResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DescribeTransactionResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/DropNamespaceRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DropNamespaceRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/DropNamespaceResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DropNamespaceResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/DropTableIndexRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DropTableIndexRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/DropTableIndexResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DropTableIndexResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/DropTableRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DropTableRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/DropTableResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DropTableResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/ErrorResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ErrorResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/ExplainTableQueryPlanRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ExplainTableQueryPlanRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/ExplainTableQueryPlanResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ExplainTableQueryPlanResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/FragmentStats/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FragmentStats
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/FragmentSummary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FragmentSummary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/FtsQuery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FtsQuery
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/GetTableStatsRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    GetTableStatsRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/GetTableStatsResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    GetTableStatsResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/GetTableTagVersionRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    GetTableTagVersionRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/GetTableTagVersionResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    GetTableTagVersionResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/Identity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Identity
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/IndexContent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IndexContent
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/InsertIntoTableRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    InsertIntoTableRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/InsertIntoTableResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    InsertIntoTableResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/JsonArrowDataType/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    JsonArrowDataType
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/JsonArrowField/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    JsonArrowField
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/JsonArrowSchema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    JsonArrowSchema
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/ListNamespacesRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ListNamespacesRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/ListNamespacesResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ListNamespacesResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/ListTableIndicesRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ListTableIndicesRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/ListTableIndicesResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ListTableIndicesResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/ListTableTagsRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ListTableTagsRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/ListTableTagsResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ListTableTagsResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/ListTableVersionsRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ListTableVersionsRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/ListTableVersionsResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ListTableVersionsResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/ListTablesRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ListTablesRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/ListTablesResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ListTablesResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/MatchQuery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MatchQuery
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/MergeInsertIntoTableRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MergeInsertIntoTableRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/MergeInsertIntoTableResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MergeInsertIntoTableResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/MultiMatchQuery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MultiMatchQuery
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/NamespaceExistsRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    NamespaceExistsRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/NewColumnTransform/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    NewColumnTransform
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/PhraseQuery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PhraseQuery
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/QueryTableRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    QueryTableRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/QueryTableRequestColumns/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    QueryTableRequestColumns
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/QueryTableRequestFullTextQuery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    QueryTableRequestFullTextQuery
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/QueryTableRequestVector/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    QueryTableRequestVector
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/RegisterTableRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RegisterTableRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/RegisterTableResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RegisterTableResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/RenameTableRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RenameTableRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/RenameTableResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RenameTableResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/RestoreTableRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RestoreTableRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/RestoreTableResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RestoreTableResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/StringFtsQuery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    StringFtsQuery
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/StructuredFtsQuery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    StructuredFtsQuery
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/TableBasicStats/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TableBasicStats
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/TableExistsRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TableExistsRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/TableVersion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TableVersion
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/TagContents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TagContents
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/UpdateTableRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UpdateTableRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/UpdateTableResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UpdateTableResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/UpdateTableSchemaMetadataRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UpdateTableSchemaMetadataRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/UpdateTableSchemaMetadataResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UpdateTableSchemaMetadataResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/UpdateTableTagRequest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UpdateTableTagRequest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/client/operations/models/UpdateTableTagResponse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UpdateTableTagResponse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_4_3" id="__nav_4_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Directory Namespace
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Directory Namespace
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/dir/catalog-spec/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Catalog Spec
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/dir/impl-spec/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Implementation Spec
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4_4" id="__nav_4_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    REST Namespace
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    REST Namespace
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/rest/catalog-spec/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Catalog Spec
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/rest/impl-spec/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Implementation Spec
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../namespace/integrations/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Catalog Integrations
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_4_5" id="__nav_4_4_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Catalog Integrations
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/integrations/gravitino/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Apache Gravitino
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/integrations/hive2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Apache Hive MetaStore V2
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/integrations/hive3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Apache Hive MetaStore V3
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/integrations/iceberg/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Apache Iceberg REST Catalog
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/integrations/polaris/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Apache Polaris
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/integrations/glue/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AWS Glue
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/integrations/biglake/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Google BigLake
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/integrations/dataproc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Google Dataproc
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/integrations/onelake/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Microsoft OneLake
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/integrations/unity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Unity Catalog
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/integrations/template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Template for New Integrations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../namespace/partitioning-spec/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Partitioning Spec
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Examples
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Examples
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Python
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Python
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/python/llm_dataset_creation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LLM Dataset Creation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/python/llm_training/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LLM Training
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/python/flickr8k_dataset_creation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Multimodal Dataset Creation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/python/clip_training/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Multimodal Training
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/python/artifact_management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deep Learning Artifact Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Rust
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Rust
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/rust/write_read_dataset/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Write/Read Dataset
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/rust/hnsw/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    HNSW Vector Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/rust/llm_dataset_creation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LLM Dataset Creation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Integrations
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Integrations
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/datafusion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Apache DataFusion
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/duckdb/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DuckDB
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/huggingface/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Huggingface
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/lancedb/pglance" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PostgreSQL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/pytorch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PyTorch
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/tensorflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tensorflow
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/lancedb/lance-trino" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Trino
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../integrations/spark/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Apache Spark
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_8" id="__nav_6_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Apache Spark
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/spark/install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Install
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/spark/config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Config
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/spark/performance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Performance
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_8_5" >
        
          
          <label class="md-nav__link" for="__nav_6_8_5" id="__nav_6_8_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Operations
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_8_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_8_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Operations
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_8_5_1" >
        
          
          <label class="md-nav__link" for="__nav_6_8_5_1" id="__nav_6_8_5_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    DDL
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_8_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_8_5_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    DDL
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/spark/operations/ddl/create-namespace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CREATE NAMESPACE
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/spark/operations/ddl/drop-namespace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DROP NAMESPACE
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/spark/operations/ddl/show-namespaces/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SHOW NAMESPACES
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/spark/operations/ddl/describe-namespace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DESCRIBE NAMESPACE
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/spark/operations/ddl/create-table/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CREATE TABLE
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/spark/operations/ddl/show-tables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SHOW TABLES
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/spark/operations/ddl/describe-table/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DESCRIBE TABLE
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/spark/operations/ddl/drop-table/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DROP TABLE
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/spark/operations/ddl/create-index/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CREATE INDEX
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/spark/operations/ddl/optimize/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OPTIMIZE
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/spark/operations/ddl/vacuum/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    VACUUM
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_8_5_2" >
        
          
          <label class="md-nav__link" for="__nav_6_8_5_2" id="__nav_6_8_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    DQL
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_8_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_8_5_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    DQL
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/spark/operations/dql/select/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SELECT
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_8_5_3" >
        
          
          <label class="md-nav__link" for="__nav_6_8_5_3" id="__nav_6_8_5_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    DML
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_8_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_8_5_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    DML
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/spark/operations/dml/insert-into/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    INSERT INTO
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/spark/operations/dml/update/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UPDATE SET
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/spark/operations/dml/delete/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DELETE FROM
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/spark/operations/dml/add-columns/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADD COLUMN FROM
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_9" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../integrations/ray/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Ray
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_9" id="__nav_6_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Ray
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/ray/read/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Read
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/ray/write/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Write
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/ray/distributed-indexing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/ray/data-evolution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Data Evolution
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../integrations/ray/examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Examples
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../community/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Community
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Community
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/maintainers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Maintainers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/pmc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PMC
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/communication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Communication
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/voting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Voting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/release/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Release
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../community/project-specific/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Project Specific Guidelines
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7_8" id="__nav_7_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Project Specific Guidelines
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_8_2" >
        
          
          <label class="md-nav__link" for="__nav_7_8_2" id="__nav_7_8_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Lance
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_8_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_8_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Lance
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/project-specific/lance/general/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    General
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/project-specific/lance/release/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Release
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/project-specific/lance/rust/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rust
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/project-specific/lance/python/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Python
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/project-specific/lance/docs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Docs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/project-specific/namespace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lance Namespace
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/project-specific/namespace-impls/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lance Namespace Impls
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/project-specific/ray/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lance Ray
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/project-specific/spark/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lance Spark
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../sdk_docs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SDK Docs
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overall-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overall Architecture
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Overall Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#base-table" class="md-nav__link">
    <span class="md-ellipsis">
      
        Base Table
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#region" class="md-nav__link">
    <span class="md-ellipsis">
      
        Region
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memwal-index" class="md-nav__link">
    <span class="md-ellipsis">
      
        MemWAL Index
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#region-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        Region Architecture
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Region Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#memtable" class="md-nav__link">
    <span class="md-ellipsis">
      
        MemTable
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wal" class="md-nav__link">
    <span class="md-ellipsis">
      
        WAL
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flushed-memtable" class="md-nav__link">
    <span class="md-ellipsis">
      
        Flushed MemTable
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#region-manifest" class="md-nav__link">
    <span class="md-ellipsis">
      
        Region Manifest
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#memwal-index-details" class="md-nav__link">
    <span class="md-ellipsis">
      
        MemWAL Index Details
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MemWAL Index Details">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#index-details" class="md-nav__link">
    <span class="md-ellipsis">
      
        Index Details
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#region-identifier" class="md-nav__link">
    <span class="md-ellipsis">
      
        Region Identifier
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#region-spec" class="md-nav__link">
    <span class="md-ellipsis">
      
        Region Spec
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Region Spec">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#region-expression" class="md-nav__link">
    <span class="md-ellipsis">
      
        Region Expression
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#region-transform" class="md-nav__link">
    <span class="md-ellipsis">
      
        Region Transform
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#region-snapshot-storage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Region Snapshot Storage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#region-snapshot-arrow-schema" class="md-nav__link">
    <span class="md-ellipsis">
      
        Region Snapshot Arrow Schema
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vector-index-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Vector Index Configuration
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storage-layout" class="md-nav__link">
    <span class="md-ellipsis">
      
        Storage Layout
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writer-expectations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Writer Expectations
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Writer Expectations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#writer-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Writer Configuration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synchronous-vs-asynchronous-operations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Synchronous vs Asynchronous Operations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initialization-recovery" class="md-nav__link">
    <span class="md-ellipsis">
      
        Initialization &amp; Recovery
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#write-operations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Write Operations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wal-flush" class="md-nav__link">
    <span class="md-ellipsis">
      
        WAL Flush
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memtable-indexing" class="md-nav__link">
    <span class="md-ellipsis">
      
        MemTable Indexing
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wal-fragment-mapping-construction" class="md-nav__link">
    <span class="md-ellipsis">
      
        WAL Fragment Mapping Construction
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memtable-flush" class="md-nav__link">
    <span class="md-ellipsis">
      
        MemTable Flush
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#writer-fencing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Writer Fencing
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#background-job-expectations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Background Job Expectations
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Background Job Expectations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#memtable-merger" class="md-nav__link">
    <span class="md-ellipsis">
      
        MemTable Merger
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MemTable Merger">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#merge-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Merge Workflow
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conflict-resolution-and-concurrency" class="md-nav__link">
    <span class="md-ellipsis">
      
        Conflict Resolution and Concurrency
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memwal-index-builder" class="md-nav__link">
    <span class="md-ellipsis">
      
        MemWAL Index Builder
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#base-table-index-builder" class="md-nav__link">
    <span class="md-ellipsis">
      
        Base Table Index Builder
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#garbage-collector" class="md-nav__link">
    <span class="md-ellipsis">
      
        Garbage Collector
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reader-expectations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Reader Expectations
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Reader Expectations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lsm-tree-merging-read" class="md-nav__link">
    <span class="md-ellipsis">
      
        LSM Tree Merging Read
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reader-consistency" class="md-nav__link">
    <span class="md-ellipsis">
      
        Reader Consistency
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#query-planning" class="md-nav__link">
    <span class="md-ellipsis">
      
        Query Planning
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Query Planning">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#memtable-collection" class="md-nav__link">
    <span class="md-ellipsis">
      
        MemTable Collection
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#region-pruning" class="md-nav__link">
    <span class="md-ellipsis">
      
        Region Pruning
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#indexed-read-plan" class="md-nav__link">
    <span class="md-ellipsis">
      
        Indexed Read Plan
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#query-execution" class="md-nav__link">
    <span class="md-ellipsis">
      
        Query Execution
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Query Execution">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scan-queries" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scan Queries
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#point-lookups" class="md-nav__link">
    <span class="md-ellipsis">
      
        Point Lookups
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vector-search-queries" class="md-nav__link">
    <span class="md-ellipsis">
      
        Vector Search Queries
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#full-text-search-queries" class="md-nav__link">
    <span class="md-ellipsis">
      
        Full-Text Search Queries
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendices" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appendices
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Appendices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#appendix-1-writer-fencing-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appendix 1: Writer Fencing Example
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Appendix 1: Writer Fencing Example">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initial-state" class="md-nav__link">
    <span class="md-ellipsis">
      
        Initial State
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scenario" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scenario
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-happens-to-writer-as-wal-entries" class="md-nav__link">
    <span class="md-ellipsis">
      
        What Happens to Writer A's WAL Entries?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#key-points" class="md-nav__link">
    <span class="md-ellipsis">
      
        Key Points
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#appendix-2-concurrent-merger-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appendix 2: Concurrent Merger Example
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Appendix 2: Concurrent Merger Example">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initial-state_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Initial State
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scenario-1-racing-on-the-same-generation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scenario 1: Racing on the Same Generation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scenario-2-crash-after-table-commit" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scenario 2: Crash After Table Commit
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#key-points_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Key Points
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#appendix-3-execution-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appendix 3: Execution Nodes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Appendix 3: Execution Nodes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deduplicateexec" class="md-nav__link">
    <span class="md-ellipsis">
      
        DeduplicateExec
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#takelastexec" class="md-nav__link">
    <span class="md-ellipsis">
      
        TakeLastExec
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#coalescefirstexec" class="md-nav__link">
    <span class="md-ellipsis">
      
        CoalesceFirstExec
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filterstaleexec" class="md-nav__link">
    <span class="md-ellipsis">
      
        FilterStaleExec
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bloomfilterguardexec" class="md-nav__link">
    <span class="md-ellipsis">
      
        BloomFilterGuardExec
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#appendix-4-index-catchup-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appendix 4: Index Catchup Example
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Appendix 4: Index Catchup Example">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scenario-setup" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scenario Setup
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-read-strategy-for-vector-search" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example Read Strategy for Vector Search
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="memtable-wal-specification-experimental">MemTable &amp; WAL Specification (Experimental)<a class="headerlink" href="#memtable-wal-specification-experimental" title="Permanent link">&para;</a></h1>
<p>Lance MemTable &amp; WAL (MemWAL) specification describes a Log-Structured-Merge (LSM) tree architecture for Lance tables, enabling high-performance streaming write workloads while maintaining indexed read performance for key workloads including
scan, point lookup, vector search and full-text search.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>MemWAL requires the table to have an <a href="../#unenforced-primary-key">unenforced primary key</a> defined.</p>
</div>
<h2 id="overall-architecture">Overall Architecture<a class="headerlink" href="#overall-architecture" title="Permanent link">&para;</a></h2>
<p><img alt="MemWAL Overview" src="../../../images/mem_wal_overview.png" /></p>
<h3 id="base-table">Base Table<a class="headerlink" href="#base-table" title="Permanent link">&para;</a></h3>
<p>Under the MemWAL setup, the Lance table is called the <strong>base table</strong>.</p>
<h3 id="region">Region<a class="headerlink" href="#region" title="Permanent link">&para;</a></h3>
<p>A <strong>Region</strong> is the main unit to horizontally scale out writes.</p>
<p>Each region has exactly one active writer at any time, using <strong>epoch-based fencing</strong> to guarantee single-writer semantics without distributed coordination.
Writers claim a region by incrementing the writer epoch, then write data to that region.
Data in each region is merged into the base table gradually in the background.</p>
<p>Regions must contain rows that are <strong>mutually exclusive</strong>.
Two regions contain rows with the same primary key, the following scenario can cause data corruption:</p>
<ol>
<li>Region A receives a write with primary key <code>pk=1</code> at time T1</li>
<li>Region B receives a write with primary key <code>pk=1</code> at time T2 (T2 &gt; T1)</li>
<li>The row in region B is merged into the base table first</li>
<li>The row in region A is merged into the base table second</li>
<li>The row from Region A (older) now overwrites the row from Region B (newer)</li>
</ol>
<p>This violates the expected "last write wins" semantics.
By ensuring each primary key is assigned to exactly one region via the region spec, merge order between regions becomes irrelevant for correctness.</p>
<h3 id="memwal-index">MemWAL Index<a class="headerlink" href="#memwal-index" title="Permanent link">&para;</a></h3>
<p>A <strong>MemWAL Index</strong> is the centralized structure for all MemWAL metadata for a base table.
A table has at most one MemWAL index.
It stores:</p>
<ul>
<li><strong>Configuration</strong>: Region specs defining how rows map to regions, and which indexes to maintain</li>
<li><strong>Merge progress</strong>: Last generation merged to base table for each region</li>
<li><strong>Index catchup progress</strong>: Which merged generation each base table index has been rebuilt to cover</li>
<li><strong>Region snapshots</strong>: Point-in-time snapshot of all region states for read optimization</li>
</ul>
<p>The index is the source of truth for <strong>configuration</strong> and <strong>merge progress</strong>, but region state snapshots are for read-only optimization (each region's manifest is authoritative for its own state).</p>
<p>Writers read the MemWAL index to get configuration (region specs, maintained indexes) before writing.
Readers use the index to get a <a href="#reader-consistency">snapshot of all region states</a>, then query each region's data alongside the base table and merge results at runtime.</p>
<p>A <a href="#memwal-index-builder">background process</a> periodically updates region snapshots by listing regions and loading their manifests.
See <a href="#memwal-index-details">MemWAL Index Details</a> for the complete structure.</p>
<h2 id="region-architecture">Region Architecture<a class="headerlink" href="#region-architecture" title="Permanent link">&para;</a></h2>
<p><img alt="Region Architecture" src="../../../images/mem_wal_regional.png" /></p>
<p>Within a region, writes enter its MemTable and are flushed to the regional WAL for durability.
The MemTable is flushed to storage as a Flushed MemTable based on memory pressure and other conditions.
Flushed MemTables are then asynchronously merged into the base table.</p>
<h3 id="memtable">MemTable<a class="headerlink" href="#memtable" title="Permanent link">&para;</a></h3>
<p>An in-memory Lance table that buffers incoming writes.
Each write inserts a fragment in the MemTable, making data immediately queryable without waiting for persistence.</p>
<p>In addition to the data fragments, a MemTable maintains:</p>
<ul>
<li><strong>Primary key bloom filter</strong>: For efficient existence checks during staleness detection</li>
<li><strong>In-memory index builders</strong>: Incremental index structures that mirror base table indexes, enabling indexed queries on unflushed data</li>
<li><strong>WAL fragment mapping</strong>: Tracks correspondence between MemTable fragment IDs and WAL entry IDs for index remapping during flush</li>
</ul>
<h3 id="wal">WAL<a class="headerlink" href="#wal" title="Permanent link">&para;</a></h3>
<p>Write-Ahead Log (WAL) serves as the durable storage of MemTable.
A write to MemTable must be persisted also to the WAL to become fully durable.
Every time we write to the WAL, we call it a <strong>WAL Flush</strong>.</p>
<p>The whole LSM tree's durability is determined by the durability of the WAL.
For example, if WAL is stored in Amazon S3, it has the 99.999999999% durability.
If it is stored in local disk, the data will be lost if the local disk is damaged.</p>
<p>A WAL consists of an ordered sequence of WAL entries starting from 1. Each entry is a Lance format file.
The writer epoch is stored in the Lance file's schema metadata with key <code>writer_epoch</code> for fencing validation during replay.</p>
<p>Each WAL entry is stored within the WAL directory of the region located at <code>_mem_wal/{region_id}/wal</code>.</p>
<p>WAL files use bit-reversed 64-bit binary naming to distribute files evenly across the directory keyspace.
This optimizes S3 throughput by spreading sequential writes across S3's internal partitions, minimizing throttling.
The filename is the bit-reversed binary representation of the entry ID with suffix <code>.lance</code>.
For example, entry ID 5 (binary <code>000...101</code>) becomes <code>1010000000000000000000000000000000000000000000000000000000000000.lance</code>.</p>
<h3 id="flushed-memtable">Flushed MemTable<a class="headerlink" href="#flushed-memtable" title="Permanent link">&para;</a></h3>
<p>A flushed MemTable is a complete Lance table created by flushing the MemTable to storage.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is called Sorted String Table (SSTable) or Sorted Run in many LSM-tree literatures and implementations.
However, since our MemTable is not sorted, we just use the term flushed MemTable to avoid confusion.</p>
</div>
<p>Each flushed MemTable has a <strong>generation</strong> number starting from 1 that identifies its relative position among all flushed MemTables in the region.
When MemTable with generation <code>i</code> is flushed, the next MemTable gets generation number <code>i+1</code>.</p>
<p>The MemTable of generation <code>i</code> is flushed to <code>_mem_wal/{region_uuid}/{random_hash}_gen_{i}/</code> directory, where <code>{random_hash}</code> is an 8-character hex value generated at flush time.
The directory content follows <a href="../layout/">Lance table layout</a>.</p>
<p>The actual directory path for each generation is recorded in the region manifest's <code>flushed_generations</code> list (see <a href="#region-manifest">Region Manifest</a>).</p>
<p>Generation numbers determine merge order: lower numbers represent older data and must be merged to the base table first to preserve correct upsert semantics.</p>
<h3 id="region-manifest">Region Manifest<a class="headerlink" href="#region-manifest" title="Permanent link">&para;</a></h3>
<p>Each region has a manifest file containing epoch-based fencing tokens, WAL pointers, and flushed MemTable generation trackers. This is the source of truth for region state.</p>
<p>The manifest is serialized as a protobuf binary file using the <code>RegionManifest</code> message.</p>
<p>The manifest contains:</p>
<ul>
<li><strong>Fencing state</strong>: <code>writer_epoch</code> (writer fencing token)</li>
<li><strong>WAL pointers</strong>: <code>replay_after_wal_id</code> (last entry flushed to MemTable), <code>wal_id_last_seen</code> (last entry seen at manifest update)</li>
<li><strong>Generation trackers</strong>: <code>current_generation</code> (next generation to flush)</li>
<li><strong>Flushed generations</strong>: <code>flushed_generations</code> list of generation number and directory path pairs (e.g., generation 1 at <code>a1b2c3d4_gen_1</code>)</li>
</ul>
<p>Note: <code>wal_id_last_seen</code> is a hint that may be stale since it's not updated on WAL write.
The manifest itself is atomically written, but recovery must try to get newer WAL files to find the actual state beyond this hint.</p>
<details>
<summary>RegionManifest protobuf message</summary>

<div class="language-protobuf highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kd">message</span><span class="w"> </span><span class="nc">RegionManifest</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">  </span><span class="c1">// Region identifier (UUID v4).</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">  </span><span class="n">UUID</span><span class="w"> </span><span class="na">region_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">11</span><span class="p">;</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">  </span><span class="c1">// Manifest version number.</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">  </span><span class="c1">// Matches the version encoded in the filename.</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">  </span><span class="kt">uint64</span><span class="w"> </span><span class="na">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="w">  </span><span class="c1">// Region spec ID this region was created with.</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="w">  </span><span class="c1">// Set at region creation and immutable thereafter.</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="w">  </span><span class="c1">// A value of 0 indicates a manually-created region not governed by any spec.</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="w">  </span><span class="kt">uint32</span><span class="w"> </span><span class="na">region_spec_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="w">  </span><span class="c1">// Writer fencing token - monotonically increasing.</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="w">  </span><span class="c1">// A writer must increment this when claiming the region.</span>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="w">  </span><span class="kt">uint64</span><span class="w"> </span><span class="na">writer_epoch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="w">  </span><span class="c1">// The most recent WAL entry ID that has been flushed to a MemTable.</span>
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="w">  </span><span class="c1">// During recovery, replay starts from replay_after_wal_id + 1.</span>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="w">  </span><span class="kt">uint64</span><span class="w"> </span><span class="na">replay_after_wal_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="w">  </span><span class="c1">// The most recent WAL entry ID at the time manifest was updated.</span>
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="w">  </span><span class="c1">// This is a hint, not authoritative - recovery must list files to find actual state.</span>
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a><span class="w">  </span><span class="kt">uint64</span><span class="w"> </span><span class="na">wal_id_last_seen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a><span class="w">  </span><span class="c1">// Next generation ID to create (incremented after each MemTable flush).</span>
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a><span class="w">  </span><span class="kt">uint64</span><span class="w"> </span><span class="na">current_generation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span>
</span><span id="__span-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a>
</span><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a><span class="w">  </span><span class="c1">// Field 7 removed: merged_generation moved to MemWalIndexDetails.merged_generations</span>
</span><span id="__span-0-30"><a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a><span class="w">  </span><span class="c1">// which is the authoritative source for merge progress.</span>
</span><span id="__span-0-31"><a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a>
</span><span id="__span-0-32"><a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a><span class="w">  </span><span class="c1">// List of flushed MemTable generations and their directory paths.</span>
</span><span id="__span-0-33"><a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a><span class="w">  </span><span class="k">repeated</span><span class="w"> </span><span class="n">FlushedGeneration</span><span class="w"> </span><span class="na">flushed_generations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span>
</span><span id="__span-0-34"><a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a>
</span><span id="__span-0-35"><a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a><span class="p">}</span>
</span></code></pre></div>

</details>

<p>Manifests are versioned starting from 1 and immutable. Each update creates a new manifest file at the next version number.
Updates use put-if-not-exists or file rename to ensure atomicity depending on the storage system.
If two processes compete, one wins and the other retries.</p>
<p>To commit a manifest version:</p>
<ol>
<li>Compute the next version number</li>
<li>Write the manifest to <code>{bit_reversed_version}.binpb</code> using put-if-not-exists</li>
<li>In parallel best-effort write to <code>version_hint.json</code> with <code>{"version": &lt;new_version&gt;}</code> (failure is acceptable)</li>
</ol>
<p>To read the latest manifest version:</p>
<ol>
<li>Read <code>version_hint.json</code> to get the latest version hint. If not found, start from version 1</li>
<li>Check existence for subsequent versions from the starting version</li>
<li>Continue until a version is not found</li>
<li>The latest version is the last found version</li>
</ol>
<p>This approach uses HEAD requests instead of LIST operations in cloud storage, which is generally faster and is friendly to systems like S3 Express that do not support lexicographically sorted listing.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This works because the write rate to region manifests is significantly lower than read rates. Region manifests are only updated when region metadata changes (MemTable flush), not on every write. This ensures HEAD requests will eventually terminate and find the latest version.</p>
</div>
<p>All region manifest versions are stored in <code>_mem_wal/{region_id}/manifest</code> directory.</p>
<p>Each region manifest version file uses bit-reversed 64-bit binary naming, the same scheme as WAL files.
For example, version 5 becomes <code>1010000000000000000000000000000000000000000000000000000000000000.binpb</code>.</p>
<p>The region manifest is updated atomically in the following cases:</p>
<table>
<thead>
<tr>
<th>Trigger</th>
<th>Fields Updated</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#initialization--recovery">Initialization &amp; Recovery</a></td>
<td><code>writer_epoch</code></td>
<td>Incremented when writer claims the region</td>
</tr>
<tr>
<td><a href="#memtable-flush">MemTable Flush</a></td>
<td><code>replay_after_wal_id</code>, <code>wal_id_last_seen</code>, <code>current_generation</code>, <code>flushed_generations</code></td>
<td>After flushing MemTable to storage</td>
</tr>
<tr>
<td><a href="#memwal-index-builder">MemWAL Index Builder</a></td>
<td><code>wal_id_last_seen</code></td>
<td>Periodically scans WAL entries and updates hint</td>
</tr>
<tr>
<td><a href="#garbage-collector">Garbage Collector</a></td>
<td><code>flushed_generations</code></td>
<td>Removes entries for deleted flushed MemTables</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>WAL flush does <strong>not</strong> update the manifest to keep the hot write path fast.</p>
</div>
<p>Writers use epoch-based fencing (<code>writer_epoch</code>) to ensure single-writer semantics.
See <a href="#writer-fencing">Writer Fencing</a> for details.</p>
<h2 id="memwal-index-details">MemWAL Index Details<a class="headerlink" href="#memwal-index-details" title="Permanent link">&para;</a></h2>
<p>The MemWAL Index uses the <a href="../index/#index-storage">standard index storage</a> at <code>_indices/{UUID}/</code>.</p>
<p>The index stores its data in two parts:</p>
<ol>
<li><strong>Index details</strong> (<code>index_details</code> in <code>IndexMetadata</code>): Contains configuration, merge progress, and snapshot metadata</li>
<li><strong>Region snapshots</strong>: Stored as a Lance file or inline, depending on region count</li>
</ol>
<h3 id="index-details">Index Details<a class="headerlink" href="#index-details" title="Permanent link">&para;</a></h3>
<p>The <code>index_details</code> field in <code>IndexMetadata</code> contains a <code>MemWalIndexDetails</code> protobuf message with the following key fields:</p>
<p><strong>Configuration fields</strong> (<code>region_specs</code>, <code>maintained_indexes</code>) are the source of truth for MemWAL configuration.
Writers read these fields to determine how to partition data and which indexes to maintain.</p>
<p><strong>Merge progress</strong> (<code>merged_generations</code>) tracks the last generation merged to the base table for each region.
This field is updated atomically with merge-insert data commits, enabling conflict resolution when multiple mergers operate concurrently.
Each entry contains the region UUID and generation number.</p>
<p><strong>Index catchup progress</strong> (<code>index_catchup</code>) tracks which merged generation each base table index has been rebuilt to cover.
When data is merged from a flushed MemTable to the base table, the base table's indexes are rebuilt asynchronously.
During this window, queries should use the flushed MemTable's pre-built indexes instead of scanning unindexed data in the base table.
See <a href="#index-catchup-and-read-path">Index Catchup and Read Path</a> for details.</p>
<p><strong>Region snapshot fields</strong> (<code>snapshot_ts_millis</code>, <code>num_regions</code>, <code>inline_snapshots</code>) provide a point-in-time snapshot of region states.
The actual region manifests remain authoritative for region state.
When <code>num_regions</code> is 0, the <code>inline_snapshots</code> field may be <code>None</code> or an empty Lance file with 0 rows but proper schema.</p>
<details>
<summary>MemWalIndexDetails protobuf message</summary>

<div class="language-protobuf highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kd">message</span><span class="w"> </span><span class="nc">MemWalIndexDetails</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">  </span><span class="c1">// Snapshot timestamp (Unix timestamp in milliseconds).</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">  </span><span class="kt">int64</span><span class="w"> </span><span class="na">snapshot_ts_millis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">  </span><span class="c1">// Number of regions in the snapshot.</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">  </span><span class="c1">// Used to determine storage format without reading the snapshot data.</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">  </span><span class="kt">uint32</span><span class="w"> </span><span class="na">num_regions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">  </span><span class="c1">// Inline region snapshots for small region counts.</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="w">  </span><span class="c1">// When num_regions &lt;= threshold (implementation-defined, e.g., 100),</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">  </span><span class="c1">// snapshots are stored inline as serialized bytes.</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="w">  </span><span class="c1">// Format: Lance file bytes with the region snapshot schema.</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="w">  </span><span class="k">optional</span><span class="w"> </span><span class="kt">bytes</span><span class="w"> </span><span class="na">inline_snapshots</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="w">  </span><span class="c1">// Region specs defining how to derive region identifiers.</span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="w">  </span><span class="c1">// This configuration determines how rows are partitioned into regions.</span>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="w">  </span><span class="k">repeated</span><span class="w"> </span><span class="n">RegionSpec</span><span class="w"> </span><span class="na">region_specs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">7</span><span class="p">;</span>
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="w">  </span><span class="c1">// Indexes from the base table to maintain in MemTables.</span>
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a><span class="w">  </span><span class="c1">// These are index names referencing indexes defined on the base table.</span>
</span><span id="__span-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a><span class="w">  </span><span class="c1">// The primary key btree index is always maintained implicitly and</span>
</span><span id="__span-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a><span class="w">  </span><span class="c1">// should not be listed here.</span>
</span><span id="__span-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a><span class="w">  </span><span class="c1">//</span>
</span><span id="__span-1-24"><a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a><span class="w">  </span><span class="c1">// For vector indexes, MemTables inherit quantization parameters (PQ codebook,</span>
</span><span id="__span-1-25"><a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a><span class="w">  </span><span class="c1">// SQ params) from the base table index to ensure distance comparability.</span>
</span><span id="__span-1-26"><a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a><span class="w">  </span><span class="k">repeated</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="na">maintained_indexes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span>
</span><span id="__span-1-27"><a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a>
</span><span id="__span-1-28"><a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a><span class="w">  </span><span class="c1">// Last generation merged to base table for each region.</span>
</span><span id="__span-1-29"><a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a><span class="w">  </span><span class="c1">// This is updated atomically with merge-insert data commits, enabling</span>
</span><span id="__span-1-30"><a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a><span class="w">  </span><span class="c1">// conflict resolution when multiple mergers operate concurrently.</span>
</span><span id="__span-1-31"><a id="__codelineno-1-31" name="__codelineno-1-31" href="#__codelineno-1-31"></a><span class="w">  </span><span class="c1">//</span>
</span><span id="__span-1-32"><a id="__codelineno-1-32" name="__codelineno-1-32" href="#__codelineno-1-32"></a><span class="w">  </span><span class="c1">// Note: This is separate from region snapshots because:</span>
</span><span id="__span-1-33"><a id="__codelineno-1-33" name="__codelineno-1-33" href="#__codelineno-1-33"></a><span class="w">  </span><span class="c1">// 1. merged_generations is updated by mergers (atomic with data commit)</span>
</span><span id="__span-1-34"><a id="__codelineno-1-34" name="__codelineno-1-34" href="#__codelineno-1-34"></a><span class="w">  </span><span class="c1">// 2. region snapshots are updated by background index builder</span>
</span><span id="__span-1-35"><a id="__codelineno-1-35" name="__codelineno-1-35" href="#__codelineno-1-35"></a><span class="w">  </span><span class="k">repeated</span><span class="w"> </span><span class="n">MergedGeneration</span><span class="w"> </span><span class="na">merged_generations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">9</span><span class="p">;</span>
</span><span id="__span-1-36"><a id="__codelineno-1-36" name="__codelineno-1-36" href="#__codelineno-1-36"></a>
</span><span id="__span-1-37"><a id="__codelineno-1-37" name="__codelineno-1-37" href="#__codelineno-1-37"></a><span class="w">  </span><span class="c1">// Per-index catchup progress tracking.</span>
</span><span id="__span-1-38"><a id="__codelineno-1-38" name="__codelineno-1-38" href="#__codelineno-1-38"></a><span class="w">  </span><span class="c1">// When data is merged to the base table, base table indexes are rebuilt</span>
</span><span id="__span-1-39"><a id="__codelineno-1-39" name="__codelineno-1-39" href="#__codelineno-1-39"></a><span class="w">  </span><span class="c1">// asynchronously. This field tracks which generation each index covers.</span>
</span><span id="__span-1-40"><a id="__codelineno-1-40" name="__codelineno-1-40" href="#__codelineno-1-40"></a><span class="w">  </span><span class="c1">//</span>
</span><span id="__span-1-41"><a id="__codelineno-1-41" name="__codelineno-1-41" href="#__codelineno-1-41"></a><span class="w">  </span><span class="c1">// For indexed queries, if an index&#39;s caught_up_generation &lt; merged_generation,</span>
</span><span id="__span-1-42"><a id="__codelineno-1-42" name="__codelineno-1-42" href="#__codelineno-1-42"></a><span class="w">  </span><span class="c1">// readers should use flushed MemTable indexes for the gap instead of</span>
</span><span id="__span-1-43"><a id="__codelineno-1-43" name="__codelineno-1-43" href="#__codelineno-1-43"></a><span class="w">  </span><span class="c1">// scanning unindexed data in the base table.</span>
</span><span id="__span-1-44"><a id="__codelineno-1-44" name="__codelineno-1-44" href="#__codelineno-1-44"></a><span class="w">  </span><span class="c1">//</span>
</span><span id="__span-1-45"><a id="__codelineno-1-45" name="__codelineno-1-45" href="#__codelineno-1-45"></a><span class="w">  </span><span class="c1">// If an index is not present in this list, it is assumed to be fully caught up.</span>
</span><span id="__span-1-46"><a id="__codelineno-1-46" name="__codelineno-1-46" href="#__codelineno-1-46"></a><span class="w">  </span><span class="k">repeated</span><span class="w"> </span><span class="n">IndexCatchupProgress</span><span class="w"> </span><span class="na">index_catchup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
</span><span id="__span-1-47"><a id="__codelineno-1-47" name="__codelineno-1-47" href="#__codelineno-1-47"></a>
</span><span id="__span-1-48"><a id="__codelineno-1-48" name="__codelineno-1-48" href="#__codelineno-1-48"></a><span class="p">}</span>
</span></code></pre></div>

</details>

<h3 id="region-identifier">Region Identifier<a class="headerlink" href="#region-identifier" title="Permanent link">&para;</a></h3>
<p>Each region has a unique identifier across all regions following UUID v4 standard.
When a new region is created, it is assigned a new identifier.</p>
<h3 id="region-spec">Region Spec<a class="headerlink" href="#region-spec" title="Permanent link">&para;</a></h3>
<p>A <strong>Region Spec</strong> defines how all rows in a table are logically divided into different regions,
enabling automatic region assignment and query-time region pruning.</p>
<p>Each region spec has:</p>
<ul>
<li><strong>Spec ID</strong>: A positive integer that uniquely identifies this spec within the MemWAL index. IDs are never reused.</li>
<li><strong>Region fields</strong>: An array of field definitions that determine how to compute region values.</li>
</ul>
<p>Each region is bound to a specific region spec ID, recorded in its <a href="#region-manifest">manifest</a>.
Regions without a spec ID (<code>spec_id = 0</code>) are manually-created regions not governed by any spec.</p>
<p>A region spec's field array consists of <strong>region field</strong> definitions.
Each region field has the following properties:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>field_id</code></td>
<td>Unique string identifier for this region field</td>
</tr>
<tr>
<td><code>source_ids</code></td>
<td>Array of field IDs referencing source columns in the schema</td>
</tr>
<tr>
<td><code>transform</code></td>
<td>A well-known region expression, specify this or <code>expression</code></td>
</tr>
<tr>
<td><code>expression</code></td>
<td>A DataFusion SQL expression for custom logic, specify this or <code>transform</code></td>
</tr>
<tr>
<td><code>result_type</code></td>
<td>The output type of the region value</td>
</tr>
</tbody>
</table>
<h4 id="region-expression">Region Expression<a class="headerlink" href="#region-expression" title="Permanent link">&para;</a></h4>
<p>A <strong>Region Expression</strong> is a <a href="https://datafusion.apache.org/user-guide/sql/index.html">DataFusion SQL expression</a> that derives a region value from source column(s).
Source columns are referenced as <code>col0</code>, <code>col1</code>, etc., corresponding to the order of field IDs in <code>source_ids</code>.</p>
<p>Region expressions must satisfy the following requirements:</p>
<ol>
<li><strong>Deterministic</strong>: The same input value must always produce the same output value.</li>
<li><strong>Stateless</strong>: The expression must not depend on external state (e.g., current time, random values, session variables).</li>
<li><strong>Type-promotion resistant</strong>: The expression must produce the same result for equivalent values regardless of their numeric type (e.g., <code>int32(5)</code> and <code>int64(5)</code> must yield the same region value).</li>
<li><strong>Column removal resistant</strong>: If a source field ID is not found in the schema, the column should be interpreted as NULL.</li>
<li><strong>NULL-safe</strong>: The expression should properly handle NULL inputs and have defined behavior (e.g., return NULL if input is NULL for single-column expressions).</li>
<li><strong>Consistent with result type</strong>: The expression's return type must be consistent with <code>result_type</code> in non-NULL cases.</li>
</ol>
<h4 id="region-transform">Region Transform<a class="headerlink" href="#region-transform" title="Permanent link">&para;</a></h4>
<p>A <strong>Region Transform</strong> is a well-known region expression with a predefined name.
When a transform is specified, the expression is derived automatically.</p>
<table>
<thead>
<tr>
<th>Transform</th>
<th>Parameters</th>
<th>Region Expression</th>
<th>Result Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>identity</code></td>
<td>(none)</td>
<td><code>col0</code></td>
<td>same as source</td>
</tr>
<tr>
<td><code>year</code></td>
<td>(none)</td>
<td><code>date_part('year', col0)</code></td>
<td><code>int32</code></td>
</tr>
<tr>
<td><code>month</code></td>
<td>(none)</td>
<td><code>date_part('month', col0)</code></td>
<td><code>int32</code></td>
</tr>
<tr>
<td><code>day</code></td>
<td>(none)</td>
<td><code>date_part('day', col0)</code></td>
<td><code>int32</code></td>
</tr>
<tr>
<td><code>hour</code></td>
<td>(none)</td>
<td><code>date_part('hour', col0)</code></td>
<td><code>int32</code></td>
</tr>
<tr>
<td><code>bucket</code></td>
<td><code>num_buckets</code></td>
<td><code>abs(murmur3(col0)) % N</code></td>
<td><code>int32</code></td>
</tr>
<tr>
<td><code>multi_bucket</code></td>
<td><code>num_buckets</code></td>
<td><code>abs(murmur3_multi(col0, col1, ...)) % N</code></td>
<td><code>int32</code></td>
</tr>
<tr>
<td><code>truncate</code></td>
<td><code>width</code></td>
<td><code>left(col0, W)</code> (string) or <code>col0 - (col0 % W)</code> (numeric)</td>
<td>same as source</td>
</tr>
</tbody>
</table>
<p>The <code>bucket</code> and <code>multi_bucket</code> transforms use Murmur3 hash functions:</p>
<ul>
<li><strong><code>murmur3(col)</code></strong>: Computes the 32-bit Murmur3 hash (x86 variant, seed 0) of a single column. Returns a signed 32-bit integer. Returns NULL if input is NULL.</li>
<li><strong><code>murmur3_multi(col0, col1, ...)</code></strong>: Computes the Murmur3 hash across multiple columns. Returns a signed 32-bit integer. NULL fields are ignored during hashing; returns NULL only if all inputs are NULL.</li>
</ul>
<p>The hash result is wrapped with <code>abs()</code> and modulo <code>N</code> to produce a non-negative bucket number in the range <code>[0, N)</code>.</p>
<h3 id="region-snapshot-storage">Region Snapshot Storage<a class="headerlink" href="#region-snapshot-storage" title="Permanent link">&para;</a></h3>
<p>Region snapshots are stored using one of two strategies based on the number of regions:</p>
<table>
<thead>
<tr>
<th>Region Count</th>
<th>Storage Strategy</th>
<th>Location</th>
</tr>
</thead>
<tbody>
<tr>
<td>&lt;= 100 (threshold)</td>
<td>Inline</td>
<td><code>inline_snapshots</code> field in index details</td>
</tr>
<tr>
<td>&gt; 100</td>
<td>External Lance file</td>
<td><code>_indices/{UUID}/index.lance</code></td>
</tr>
</tbody>
</table>
<p>The threshold (100 regions) is implementation-defined and may vary.</p>
<p><strong>Inline storage</strong>: For small region counts, snapshots are serialized as a Lance file and stored in the <code>inline_snapshots</code> field.
This keeps the index metadata compact while avoiding an additional file read for common cases.</p>
<p><strong>External Lance file</strong>: For large region counts, snapshots are stored as a Lance file at <code>_indices/{UUID}/index.lance</code>.
This file uses standard Lance format with the region snapshot schema, enabling efficient columnar access and compression.</p>
<h3 id="region-snapshot-arrow-schema">Region Snapshot Arrow Schema<a class="headerlink" href="#region-snapshot-arrow-schema" title="Permanent link">&para;</a></h3>
<p>Region snapshots are stored as a Lance file with one row per region.
The schema has one column per <code>RegionManifest</code> field plus region spec columns:</p>
<table>
<thead>
<tr>
<th>Column</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>region_id</code></td>
<td><code>fixed_size_binary(16)</code></td>
<td>Region UUID bytes</td>
</tr>
<tr>
<td><code>version</code></td>
<td><code>uint64</code></td>
<td>Region manifest version</td>
</tr>
<tr>
<td><code>region_spec_id</code></td>
<td><code>uint32</code></td>
<td>Region spec ID (0 if manual)</td>
</tr>
<tr>
<td><code>writer_epoch</code></td>
<td><code>uint64</code></td>
<td>Writer fencing token</td>
</tr>
<tr>
<td><code>replay_after_wal_id</code></td>
<td><code>uint64</code></td>
<td>Last WAL entry flushed to MemTable</td>
</tr>
<tr>
<td><code>wal_id_last_seen</code></td>
<td><code>uint64</code></td>
<td>Last WAL entry seen (hint)</td>
</tr>
<tr>
<td><code>current_generation</code></td>
<td><code>uint64</code></td>
<td>Next generation to flush</td>
</tr>
<tr>
<td><code>flushed_generations</code></td>
<td><code>list&lt;struct&lt;generation: uint64, path: string&gt;&gt;</code></td>
<td>Flushed MemTable paths</td>
</tr>
<tr>
<td><code>region_field_{field_id}</code></td>
<td>varies</td>
<td>Region field value (one column per field in region spec)</td>
</tr>
</tbody>
</table>
<p>For example, with a region spec containing a field <code>user_bucket</code> of type <code>int32</code>:</p>
<table>
<thead>
<tr>
<th>Column</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>...</td>
<td>...</td>
<td>(base columns above)</td>
</tr>
<tr>
<td><code>region_field_user_bucket</code></td>
<td><code>int32</code></td>
<td>Bucket value for this region</td>
</tr>
</tbody>
</table>
<p>This schema directly corresponds to the fields in the <code>RegionManifest</code> protobuf message plus the computed region field values.</p>
<h3 id="vector-index-configuration">Vector Index Configuration<a class="headerlink" href="#vector-index-configuration" title="Permanent link">&para;</a></h3>
<p>If the main use case is IVF family vector index, it is recommended to have these indexes on the Lance table before enabling MemWAL.
This is because IVF index needs to remain the same quantization codebook (e.g. PQ codebook) across all the layers of the LSM tree for vector distance to be comparable.</p>
<p>MemTables automatically inherit vector indexing from base table indexes.
For each vector index on the base table, MemTable uses the same index type (IVF-PQ, IVF-SQ, etc.) with the same centroids and quantization parameters.
This ensures distances are precise and comparable across generations.</p>
<p>The base table vector index should not change the codebook once MemWAL is enabled.
To switch codebooks, a migration is required: create another vector index with the new codebook, configure MemTable to maintain both indexes, and eventually drop the old index after all readers are using the new codebook and all MemTables have indexes using the new codebook.</p>
<h2 id="storage-layout">Storage Layout<a class="headerlink" href="#storage-layout" title="Permanent link">&para;</a></h2>
<p>Here is a recap of the storage layout with all the files and concepts defined so far:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>{table_path}/
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a> _indices/
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>    {index_uuid}/                    # MemWAL Index (uses standard index storage)
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>        index.lance                  # Serialized region snapshots (Lance file)
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a> _mem_wal/
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>     {region_uuid}/                   # Region directory (UUID v4)
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>         manifest/
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>            {bit_reversed_version}.binpb     # Serialized region manifest (bit-reversed naming)
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>            version_hint.json                # Version hint file
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>         wal/
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a>            {bit_reversed_entry_id}.lance    # WAL data files (bit-reversed naming)
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a>            ...
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a>         {random_hash}_gen_{i}/        # Flushed MemTable (generation i, random prefix)
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a>             _versions/
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a>                {version}.manifest    # Table manifest (V2 naming scheme)
</span><span id="__span-2-17"><a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a>             _indices/                 # Indexes
</span><span id="__span-2-18"><a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a>                {vector_index}/
</span><span id="__span-2-19"><a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a>                {scalar_index}/
</span><span id="__span-2-20"><a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a>             bloom_filter.bin          # Primary key bloom filter
</span></code></pre></div>
<h2 id="writer-expectations">Writer Expectations<a class="headerlink" href="#writer-expectations" title="Permanent link">&para;</a></h2>
<p>A writer operates on a single region within a single process and may spawn asynchronous tasks for background operations like WAL flush and MemTable flush.</p>
<h3 id="writer-configuration">Writer Configuration<a class="headerlink" href="#writer-configuration" title="Permanent link">&para;</a></h3>
<p>Writers can be configured with the following options that affect write behavior:</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Durable write</strong></td>
<td>Each write is persisted to WAL before reporting success. Ensures no data loss on crash, but adds latency for object storage writes.</td>
</tr>
<tr>
<td><strong>Indexed write</strong></td>
<td>Each write refreshes MemTable indexes before reporting success. Ensures new data is immediately searchable via indexes, but adds indexing latency.</td>
</tr>
</tbody>
</table>
<p>Both options can be enabled independently. When disabled:</p>
<ul>
<li><strong>Non-durable writes</strong> buffer data in memory until a flush threshold is reached, accepting potential data loss on crash</li>
<li><strong>Non-indexed writes</strong> defer index updates, meaning newly written data may not appear in index-accelerated queries until the next index refresh</li>
</ul>
<h3 id="synchronous-vs-asynchronous-operations">Synchronous vs Asynchronous Operations<a class="headerlink" href="#synchronous-vs-asynchronous-operations" title="Permanent link">&para;</a></h3>
<p>Writer operations can be categorized by their synchronous or asynchronous nature:</p>
<table>
<thead>
<tr>
<th>Operation</th>
<th>Mode</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#initialization--recovery">Initialization &amp; Recovery</a></td>
<td>Synchronous</td>
<td>Claims region and replays WAL entries</td>
</tr>
<tr>
<td><a href="#write-operations">Write to MemTable</a></td>
<td>Synchronous</td>
<td>Data inserted into in-memory fragments</td>
</tr>
<tr>
<td><a href="#wal-flush">WAL Flush</a></td>
<td>Configurable</td>
<td>Synchronous with durable writes, asynchronous otherwise</td>
</tr>
<tr>
<td><a href="#memtable-indexing">Index Update</a></td>
<td>Configurable</td>
<td>Synchronous with indexed writes, asynchronous otherwise</td>
</tr>
<tr>
<td><a href="#memtable-flush">MemTable Flush</a></td>
<td>Asynchronous</td>
<td>Triggered by thresholds, runs in background</td>
</tr>
</tbody>
</table>
<h3 id="initialization-recovery">Initialization &amp; Recovery<a class="headerlink" href="#initialization-recovery" title="Permanent link">&para;</a></h3>
<p>A writer must claim a region before performing any write operations:</p>
<ol>
<li>Load the latest region manifest</li>
<li>Increment <code>writer_epoch</code> by one</li>
<li>Atomically write a new manifest</li>
<li>If the write fails (another writer claimed the epoch), reload the manifest and retry with a higher epoch</li>
<li>After initialization, read WAL entries sequentially from <code>replay_after_wal_id + 1</code> until not found</li>
<li>Replay valid WAL entries (those with <code>writer_epoch</code> &lt;= current epoch) to reconstruct the MemTable with 1:1 <a href="#wal-fragment-mapping-construction">WAL fragment mapping</a> (each WAL entry becomes one MemTable fragment)</li>
</ol>
<p>After initialization, the writer updates the <a href="#wal-fragment-mapping-construction">WAL fragment mapping</a> as new <a href="#wal-flush">WAL flushes</a> occur.</p>
<h3 id="write-operations">Write Operations<a class="headerlink" href="#write-operations" title="Permanent link">&para;</a></h3>
<p>Each write operation follows this sequence:</p>
<ol>
<li>Validate incoming records</li>
<li>Insert records into the MemTable, creating an in-memory fragment (immediately queryable via full scan)</li>
<li>Track the Lance data file in the new fragment for pending WAL flush</li>
<li>Optionally trigger WAL flush based on size, count, or time thresholds</li>
<li>For <a href="#writer-configuration">durable writes</a>, wait for WAL flush to complete before returning</li>
<li>For <a href="#writer-configuration">indexed writes</a>, update MemTable indexes before returning:<ul>
<li>Insert primary keys into the bloom filter</li>
<li>For each vector column with a base table index: encode and insert using the same index type as base table</li>
<li>For each index in <code>maintained_indexes</code>: update the corresponding index structure</li>
</ul>
</li>
</ol>
<h3 id="wal-flush">WAL Flush<a class="headerlink" href="#wal-flush" title="Permanent link">&para;</a></h3>
<p>WAL flush batches pending MemTable fragments into a single Lance data file:</p>
<ol>
<li>Identify pending (unflushed) fragments in the MemTable</li>
<li>Start writing the WAL entry to object storage</li>
<li>Stream binary pages from each pending fragment's Lance data file directly to the WAL entry</li>
<li>Write the footer containing batched data file metadata and <code>writer_epoch</code> in schema metadata</li>
<li>Complete the WAL entry write atomically</li>
<li>Mark fragments as flushed in the MemTable</li>
<li>Update the <a href="#wal-fragment-mapping-construction">WAL fragment mapping</a> (MemTable fragment IDs in this batch -&gt; WAL entry ID and positions) for index remapping during <a href="#memtable-flush">MemTable Flush</a></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The region manifest is <strong>not</strong> updated on every WAL flush. The <code>wal_id_last_seen</code> field is a hint that can be updated:</p>
<ol>
<li><strong>During MemTable flush</strong> - when the region manifest is updated anyway</li>
<li><strong>By a background index builder</strong> - which scans WAL entries and updates each region's <code>wal_id_last_seen</code></li>
</ol>
<p>This keeps the hot write path fast. On recovery, the writer reads WAL entries sequentially starting from <code>wal_id_last_seen + 1</code> to discover any WAL entries beyond what the manifest indicates.</p>
</div>
<p>The WAL flush behavior depends on the <a href="#writer-configuration">durable write</a> option:</p>
<table>
<thead>
<tr>
<th>Mode</th>
<th>Behavior</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr>
<td>Durable write</td>
<td>Flush immediately, wait for completion</td>
<td>One or more Lance files per write</td>
</tr>
<tr>
<td>Non-durable write</td>
<td>Buffer until threshold, return immediately</td>
<td>Batched Lance files (fewer S3 operations)</td>
</tr>
</tbody>
</table>
<h3 id="memtable-indexing">MemTable Indexing<a class="headerlink" href="#memtable-indexing" title="Permanent link">&para;</a></h3>
<p>MemTable indexing differs from base table indexing to balance write performance with query capability.
Rather than maintaining all base table indexes, MemTables maintain a subset specified in the <a href="#memwal-index">MemWAL Index</a>.</p>
<p>MemTables maintain a <strong>primary key bloom filter</strong> for efficiently checking whether a primary key exists in a generation.
This enables staleness detection during search queries without requiring expensive point lookups.</p>
<p>For vector indexes, MemTables use the same index type as the base table (e.g., IVF-PQ with the same centroids and PQ codebook).
This ensures distances are precise and directly comparable across generations.
The centroid assignment also impacts recall, so using the same centroids ensures consistent search quality.</p>
<p>For full-text search indexes, MemTables inherit tokenizer configuration from base table indexes to ensure consistent tokenization across generations.
Each generation maintains its own corpus statistics (document count, term frequencies) which are aggregated at query time for globally-comparable BM25 scores.</p>
<p>When a MemTable is flushed to storage:</p>
<ol>
<li>Indexes are serialized to disk in the flushed MemTable's <code>_indices/</code> directory following the Lance table index format</li>
<li>The primary key bloom filter is serialized to <code>bloom_filter.bin</code> in the generation directory</li>
<li>The in-memory index structures may be retained as a cache for readers in the same process</li>
</ol>
<h3 id="wal-fragment-mapping-construction">WAL Fragment Mapping Construction<a class="headerlink" href="#wal-fragment-mapping-construction" title="Permanent link">&para;</a></h3>
<p>The WAL fragment mapping tracks the correspondence between MemTable fragment IDs and WAL entry IDs.
This mapping is essential for remapping indexes during <a href="#memtable-flush">MemTable flush</a>, since indexes reference MemTable fragment IDs but the flushed MemTable references WAL entry IDs.</p>
<p>The mapping is structured as: <code>MemTable fragment ID -&gt; (WAL entry ID, position within entry)</code></p>
<p>Where:</p>
<ul>
<li><strong>MemTable fragment ID</strong>: The fragment's position in the MemTable (0-indexed within the current generation)</li>
<li><strong>WAL entry ID</strong>: The WAL entry containing this fragment's data (relative to <code>replay_after_wal_id</code>)</li>
<li><strong>Position within entry</strong>: The fragment's position within the WAL entry (since multiple fragments may be batched)</li>
</ul>
<p>The mapping is updated in two scenarios:</p>
<ol>
<li><strong><a href="#initialization--recovery">Initialization &amp; Recovery</a></strong>: During WAL replay, each replayed WAL entry creates MemTable fragments with 1:1 mapping (one fragment per WAL entry, position 0)</li>
<li><strong><a href="#wal-flush">WAL Flush</a></strong>: After flushing pending fragments to a new WAL entry, the mapping records which MemTable fragments were written to which WAL entry and their positions</li>
</ol>
<p>During <a href="#memtable-flush">MemTable flush</a>, indexes are remapped by translating MemTable fragment IDs to the corresponding WAL entry references using this mapping.</p>
<h3 id="memtable-flush">MemTable Flush<a class="headerlink" href="#memtable-flush" title="Permanent link">&para;</a></h3>
<p>Flushing the MemTable creates a new flushed MemTable (generation) with data and indexes:</p>
<ol>
<li>Generate a random 8-character hex prefix (e.g., <code>a1b2c3d4</code>)</li>
<li>Create directory <code>_mem_wal/{region_uuid}/{random_hash}_gen_{current_generation}/</code></li>
<li>Identify WAL entries to include (from <code>replay_after_wal_id + 1</code> to the last flushed entry)</li>
<li>Create table manifest with <code>base_paths</code> pointing to the WAL directory</li>
<li>Add fragment entries referencing WAL files via <code>base_id</code></li>
<li>Remap indexes using the <a href="#wal-fragment-mapping-construction">WAL fragment mapping</a>:<ul>
<li>Read index entries referencing MemTable fragment IDs</li>
<li>Translate to flushed MemTable fragment IDs using the mapping</li>
<li>Write remapped indexes to <code>_mem_wal/{region_uuid}/{random_hash}_gen_{current_generation}/_indices/</code></li>
</ul>
</li>
<li>Write the manifest to <code>_mem_wal/{region_uuid}/{random_hash}_gen_{current_generation}/_versions/{version}.manifest</code> (using <a href="../transaction/#manifest-naming-schemes">V2 naming scheme</a>)</li>
<li>Update the region manifest:<ul>
<li>Advance <code>replay_after_wal_id</code> to the last flushed WAL entry</li>
<li>Update <code>wal_id_last_seen</code></li>
<li>Increment <code>current_generation</code></li>
<li>Append <code>(current_generation, {random_hash}_gen_{current_generation})</code> to <code>flushed_generations</code></li>
</ul>
</li>
</ol>
<p>The random prefix ensures that flush retries write to a new directory, avoiding conflicts with partially written files from failed attempts. Only the directory recorded in <code>flushed_generations</code> is considered valid.</p>
<p>If the writer crashes before completing MemTable flush, the new writer replays WAL entries into memory with 1:1 <a href="#wal-fragment-mapping-construction">WAL fragment mapping</a>, rebuilds the in-memory indexes, and can then perform a fresh MemTable flush with a new random prefix.</p>
<h3 id="writer-fencing">Writer Fencing<a class="headerlink" href="#writer-fencing" title="Permanent link">&para;</a></h3>
<p>Before any manifest update (MemTable flush), a writer must verify its <code>writer_epoch</code> remains valid:</p>
<ul>
<li>If <code>local_writer_epoch == stored_writer_epoch</code>: The writer is still active and may proceed</li>
<li>If <code>local_writer_epoch &lt; stored_writer_epoch</code>: The writer has been fenced and must abort</li>
</ul>
<p>Fenced writers must stop all operations immediately and notify pending writes of the failure.</p>
<p>For a concrete example of fencing between two writers, see <a href="#appendix-1-writer-fencing-example">Appendix 1: Writer Fencing Example</a>.</p>
<h2 id="background-job-expectations">Background Job Expectations<a class="headerlink" href="#background-job-expectations" title="Permanent link">&para;</a></h2>
<p>Background jobs run independently from writers and handle asynchronous maintenance tasks.</p>
<h3 id="memtable-merger">MemTable Merger<a class="headerlink" href="#memtable-merger" title="Permanent link">&para;</a></h3>
<p>Flushed MemTables are merged to the base table in generation order using Lance's merge-insert operation.</p>
<h4 id="merge-workflow">Merge Workflow<a class="headerlink" href="#merge-workflow" title="Permanent link">&para;</a></h4>
<ol>
<li>Read <code>merged_generations[region_id]</code></li>
<li>Load the region manifest and identify unmerged flushed MemTables from <code>flushed_generations</code>: those with generation numbers &gt; <code>merged_generations[region_id]</code></li>
<li>For each flushed MemTable in ascending generation order:<ul>
<li>Look up the directory path from <code>flushed_generations</code></li>
<li>Open it as a Lance table</li>
<li>Execute merge-insert into the base table, atomically updating the MemWAL Index:<ul>
<li>Set <code>merged_generations[region_id]</code> to this generation</li>
</ul>
</li>
<li>On commit conflict, apply <a href="#conflict-resolution-and-concurrency">conflict resolution rules</a></li>
</ul>
</li>
<li>After merge, the flushed MemTable and its referenced WAL files may be garbage collected (see <a href="#garbage-collector">Garbage Collector</a>)</li>
</ol>
<p>Ordered merge ensures correct upsert semantics: flushed MemTables with higher generation numbers overwrite those with lower numbers.</p>
<h4 id="conflict-resolution-and-concurrency">Conflict Resolution and Concurrency<a class="headerlink" href="#conflict-resolution-and-concurrency" title="Permanent link">&para;</a></h4>
<p>Multiple mergers may operate on the same region concurrently. This is safe due to:</p>
<ol>
<li><strong>Atomic update</strong>: <code>merged_generations</code> is updated atomically with the data commit</li>
<li><strong>Conflict resolution</strong>: When a merge-insert commit encounters a version conflict, the merger reads the conflicting commit's <code>merged_generations</code>. If <code>merged_generations[region_id] &gt;= my_generation</code>, abort without retry (data already merged or superseded). Otherwise, retry the commit as normal.</li>
<li><strong>Merge-insert idempotency</strong>: If two mergers merge the same generation before either commits, both write identical data (primary key upsert semantics)</li>
</ol>
<p>After aborting due to a conflict, reload the MemWAL Index and region manifest, then continue to the next unmerged generation.</p>
<p><code>merged_generations</code> is the single source of truth for merge progress.
If a merger crashes after committing, the next merger reads the MemWAL Index to determine which generations are already merged.</p>
<p>For a concrete example, see <a href="#appendix-2-concurrent-merger-example">Appendix 2: Concurrent Merger Example</a>.</p>
<h3 id="memwal-index-builder">MemWAL Index Builder<a class="headerlink" href="#memwal-index-builder" title="Permanent link">&para;</a></h3>
<p>A background process periodically builds a new region snapshot:</p>
<ol>
<li>Load the existing MemWAL Index to preserve configuration (<code>region_specs</code>, <code>maintained_indexes</code>) and merge progress (<code>merged_generations</code>)</li>
<li>List all region directories under <code>_mem_wal/</code></li>
<li>For each region:<ul>
<li>Load the region manifest</li>
<li>Scan WAL entries sequentially to find the actual last entry ID</li>
<li>If the observed WAL ID is greater than <code>wal_id_last_seen</code>, update the region manifest (ignore errors since this is best-effort)</li>
<li>Copy manifest fields (including <code>flushed_generations</code>) into a region snapshot row</li>
</ul>
</li>
<li>Determine storage strategy based on region count:<ul>
<li>If <code>num_regions &lt;= threshold</code>: Serialize as Lance file bytes to <code>inline_snapshots</code></li>
<li>If <code>num_regions &gt; threshold</code>: Write as Lance file to <code>_indices/{UUID}/index.lance</code></li>
</ul>
</li>
<li>Create new <code>MemWalIndexDetails</code> with preserved configuration, merge progress, and new region snapshots</li>
<li>Update the table manifest with the new index metadata</li>
</ol>
<p>This process serves two purposes:</p>
<ul>
<li>Keeps <code>wal_id_last_seen</code> up-to-date in region manifests (since writers don't update it on every WAL flush)</li>
<li>Provides readers with an efficient snapshot of all region states</li>
</ul>
<p>The build frequency is implementation-defined. More frequent builds reduce staleness but increase I/O overhead.</p>
<h3 id="base-table-index-builder">Base Table Index Builder<a class="headerlink" href="#base-table-index-builder" title="Permanent link">&para;</a></h3>
<p>A background process rebuilds base table indexes to cover newly merged data and updates <code>index_catchup</code> progress in the MemWAL Index.
Typically there is a dedicated builder for each index.</p>
<p>The index builder workflow is expected to be:
1. Rebuild the base table index to the latest state, this automatically covers all merged generations
2. Read the current <code>merged_generations</code>
3. Update the MemWAL Index atomically:
    - Set <code>index_catchup[index_name].caught_up_generations</code> to match <code>merged_generations</code>
4. On commit conflict, reload the MemWAL Index and retry</p>
<h3 id="garbage-collector">Garbage Collector<a class="headerlink" href="#garbage-collector" title="Permanent link">&para;</a></h3>
<p>The garbage collector removes obsolete data from the region directory and updates the region manifest to remove entries from <code>flushed_generations</code> for deleted flushed MemTables.</p>
<p>Eligible for deletion:</p>
<ol>
<li><strong>Flushed MemTable directories</strong>: Generation directories where <code>generation &lt;= merged_generations[region_id]</code> AND <code>generation &lt;= min(index_catchup[I].caught_up_generation)</code> for all maintained indexes</li>
<li><strong>WAL data files</strong>: Files referenced only by deleted generations</li>
<li><strong>Old region manifest versions</strong>: Versions older than the current version minus a retention threshold</li>
<li><strong>Orphaned directories</strong>: Directories matching <code>*_gen_*</code> pattern but not in <code>flushed_generations</code> (from failed flush attempts)</li>
</ol>
<p><strong>Index catchup consideration</strong>: Flushed MemTables must be retained until all base table indexes have caught up.
Since flushed MemTables contain pre-built indexes, they are used for indexed queries when the base table index has not yet been rebuilt to cover the merged data.
Only after all indexes in <code>maintained_indexes</code> have <code>caught_up_generation &gt;= generation</code> can a flushed MemTable be safely deleted.</p>
<p><strong>Time travel consideration</strong>: Garbage collection must not remove generations that are reachable by any retained base table version. When a reader opens an older table version, the MemWAL Index snapshot from that version references specific <code>merged_generations</code> values. Generations that satisfy <code>generation &gt; merged_generations[region_id]</code> for any retained table version must be preserved.</p>
<p>Garbage collection must verify that no flushed MemTable still references a WAL file before deletion.</p>
<h2 id="reader-expectations">Reader Expectations<a class="headerlink" href="#reader-expectations" title="Permanent link">&para;</a></h2>
<h3 id="lsm-tree-merging-read">LSM Tree Merging Read<a class="headerlink" href="#lsm-tree-merging-read" title="Permanent link">&para;</a></h3>
<p>Readers <strong>MUST</strong> merge results from multiple data sources (base table, flushed MemTables, in-memory MemTables) by primary key to ensure correctness.</p>
<p>When the same primary key exists in multiple sources, the reader must keep only the newest version based on:</p>
<ol>
<li><strong>Generation number</strong> (<code>_gen</code>): Higher generation wins. The base table has generation -1, MemTables have positive integers starting from 1.</li>
<li><strong>Row address</strong> (<code>_rowaddr</code>): Within the same generation, higher row address wins (later writes within a batch overwrite earlier ones).</li>
</ol>
<p>The ordering for "newest" is: highest <code>_gen</code> first, then highest <code>_rowaddr</code>.</p>
<p>This deduplication is essential because:</p>
<ul>
<li>A row updated in a MemTable also exists (with older data) in the base table</li>
<li>A flushed MemTable that has been merged to the base table may not yet be garbage collected, causing the same row to appear in both</li>
<li>A single write batch may contain multiple updates to the same primary key</li>
</ul>
<p>Without proper merging, queries would return duplicate or stale rows.</p>
<h3 id="reader-consistency">Reader Consistency<a class="headerlink" href="#reader-consistency" title="Permanent link">&para;</a></h3>
<p>Reader consistency depends on two factors: </p>
<ol>
<li>access to in-memory MemTables</li>
<li>the source of region metadata (either through MemWAL index or region manifests)</li>
</ol>
<p>Strong consistency requires access to in-memory MemTables for all regions involved in the query and reading region manifests directly.
Otherwise, the query is eventually consistent due to missing unflushed data or stale MemWAL Index snapshots.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Reading a stale MemWAL Index does not impact correctness, only freshness:</p>
<ul>
<li><strong>Merged MemTable still in index</strong>: If a flushed MemTable has been merged to the base table but still shows in the MemWAL index, readers query both. This results in some inefficiency for querying the same data twice, but <a href="#lsm-tree-merging-read">LSM-tree merging</a> ensures correct results since both contain the same data. The inefficiency is also compensated by the fact that the data is covered by index and we rarely end up scanning both data.</li>
<li><strong>Garbage collected MemTable still in index</strong>: If a flushed MemTable has been garbage collected, but is still in the MemWAL index, readers would fail to open it and skip it. This is also safe because if it is garbage collected, the data must already exist in the base table.</li>
<li><strong>Newly flushed MemTable not in index</strong>: If a newly flushed MemTable is added after the snapshot was built, it is not queried. The result is eventually consistent but correct for the snapshot's point in time.</li>
</ul>
</div>
<h3 id="query-planning">Query Planning<a class="headerlink" href="#query-planning" title="Permanent link">&para;</a></h3>
<h4 id="memtable-collection">MemTable Collection<a class="headerlink" href="#memtable-collection" title="Permanent link">&para;</a></h4>
<p>The query planner collects datasets from multiple sources and assembles them for unified query execution.
Datasets come from:</p>
<ol>
<li>base table (representing already-merged data)</li>
<li>flushed MemTables (persisted but not yet merged)</li>
<li>optionally in-memory MemTables (if accessible).</li>
</ol>
<p>Each dataset is tagged with a generation number: -1 for the base table, and positive integers for MemTable generations.
Within a region, the generation number determines data freshness, with higher numbers representing newer data.
Rows from different regions do not need deduplication since each primary key maps to exactly one region.</p>
<p>The planner also collects bloom filters from each generation for staleness detection during search queries.</p>
<h4 id="region-pruning">Region Pruning<a class="headerlink" href="#region-pruning" title="Permanent link">&para;</a></h4>
<p>Before executing queries, if region spec is available,
the planner evaluates filter predicates against region specs to determine which regions may contain matching data.
This pruning step reduces the number of regions to scan.</p>
<p>For each filter predicate:</p>
<ol>
<li>Extract predicates on columns used in region specs</li>
<li>Evaluate which region values can satisfy the predicate</li>
<li>Prune regions whose values cannot match</li>
</ol>
<p>For example, with a region spec using <code>bucket(user_id, 10)</code> and a filter <code>user_id = 123</code>:</p>
<ol>
<li>Compute <code>bucket(123, 10) = 3</code></li>
<li>Only scan regions with bucket value 3</li>
<li>Skip all other regions</li>
</ol>
<p>Region pruning applies to both scan queries and prefilters in search queries.</p>
<h4 id="indexed-read-plan">Indexed Read Plan<a class="headerlink" href="#indexed-read-plan" title="Permanent link">&para;</a></h4>
<p>When data is merged from a flushed MemTable to the base table, the base table's indexes are rebuilt asynchronously by the <a href="#base-table-index-builder">base table index builders</a>.
During this window, the merged data exists in the base table but is not yet covered by the base table's indexes.</p>
<p>Without special handling, indexed queries would fall back to expensive full scans for the unindexed part of the base table.
To maintain indexed read performance, the query planner should use <code>index_catchup</code> progress to determine the optimal data source for each query.</p>
<p>The key insight is that flushed MemTables serve as a bridge between the base table's index catchup and the current merged state.
For a query that requires a specific index for acceleration, when <code>index_gen &lt; merged_gen</code>, 
the generations in the gap <code>(index_gen, merged_gen]</code> have data already merged in the base table but are not covered by the base table's index.
Since flushed MemTables contain pre-built indexes (created during <a href="#memtable-flush">MemTable flush</a>), queries can use these indexes instead of scanning unindexed data in the base table.
This ensures all reads remain indexed regardless of how far behind the async index builder is.</p>
<p>See <a href="#appendix-4-index-catchup-example">Appendix 4: Index Catchup Example</a> for a detailed timeline showing how this works in practice.</p>
<h3 id="query-execution">Query Execution<a class="headerlink" href="#query-execution" title="Permanent link">&para;</a></h3>
<p>Query execution unions datasets within each region and deduplicates by primary key according to <a href="#lsm-tree-merge-read">LSM tree merge read</a>.</p>
<p>The next few subsections go through the query plan expectations using custom execution nodes optimized for MemWAL's data model.</p>
<p>All query plans assume the following MemWAL setup:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>base_table: shared across all regions (gen -1)
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>region_A:
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>  gen 1: flushed_gen_1
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>  gen 2: in_memory_memtable
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>region_B:
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>  gen 1: flushed_gen_1
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>  gen 2: flushed_gen_2
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>  gen 3: in_memory_memtable
</span></code></pre></div>
<p>Existing Lance index optimizations (scalar indexes, fragment pruning, etc.) continue to apply within each scan and is omitted.
See <a href="#appendix-3-execution-nodes">Appendix 3: Execution Nodes</a> for uncommon execution nodes we use here for optimized performance.</p>
<h4 id="scan-queries">Scan Queries<a class="headerlink" href="#scan-queries" title="Permanent link">&para;</a></h4>
<p>For scan queries, the base table is scanned once and each region's MemTables are scanned separately.
Deduplication happens per primary key across all generations.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>DeduplicateExec: partition_by=[pk], order_by=[_gen DESC, _rowaddr DESC]
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>  UnionExec
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>    # Base table (shared)
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>    ScanExec: base_table[gen=-1], filter=[pushed_down]
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>    # Region A MemTables
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>    ScanExec: region_A[gen=2], filter=[pushed_down]
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>    ScanExec: region_A[gen=1], filter=[pushed_down]
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>    # Region B MemTables
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>    ScanExec: region_B[gen=3], filter=[pushed_down]
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>    ScanExec: region_B[gen=2], filter=[pushed_down]
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>    ScanExec: region_B[gen=1], filter=[pushed_down]
</span></code></pre></div>
<h4 id="point-lookups">Point Lookups<a class="headerlink" href="#point-lookups" title="Permanent link">&para;</a></h4>
<p>Primary key-based point lookups first determine the target region using the region spec, then short-circuit by checking newest generations first within that region, falling back to the base table.</p>
<p>Bloom filters optimize point lookups by skipping generations that definitely don't contain the key:</p>
<ol>
<li>Check the bloom filter for each MemTable generation (newest first)</li>
<li>If the bloom filter returns negative, skip that generation (key definitely not present)</li>
<li>If the bloom filter returns positive, try to take last matching row of that generation</li>
<li>If the key is found, return immediately without checking older generations</li>
</ol>
<div class="language-text highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a># After region pruning: only region_A needs to be checked
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a># Bloom filters checked before each scan to skip unnecessary I/O
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>CoalesceFirstExec: return_first_non_null
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>  BloomFilterGuardExec: bf[region_A][gen=2]
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>    TakeLastExec: region_A[gen=2], filter=[pk = target]
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>  BloomFilterGuardExec: bf[region_A][gen=1]
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>    TakeLastExec: region_A[gen=1], filter=[pk = target]
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>  TakeLastExec: base_table[gen=-1], filter=[pk = target]
</span></code></pre></div>
<h4 id="vector-search-queries">Vector Search Queries<a class="headerlink" href="#vector-search-queries" title="Permanent link">&para;</a></h4>
<p>Vector search uses bloom filters to detect stale results across all generations.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>GlobalLimitExec: limit=k
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>  SortExec: order_by=[_dist ASC]
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>    FilterStaleExec: bloom_filters=[bf[region_A][gen=2], bf[region_A][gen=1], bf[region_B][gen=3], bf[region_B][gen=2], bf[region_B][gen=1]]
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>      UnionExec
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>        # Base table (shared)
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>        KNNExec: base_table[gen=-1], k=k
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>        # Region A MemTables
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>        KNNExec: region_A[gen=2], k=k
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>        KNNExec: region_A[gen=1], k=k
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>        # Region B MemTables
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>        KNNExec: region_B[gen=3], k=k
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>        KNNExec: region_B[gen=2], k=k
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a>        KNNExec: region_B[gen=1], k=k
</span></code></pre></div>
<p>For each candidate from generation G, <code>FilterStaleExec</code> checks if the primary key exists in bloom filters of generations &gt; G.
If found, the candidate is filtered out because a newer version exists that was not as relevant to the query.</p>
<h4 id="full-text-search-queries">Full-Text Search Queries<a class="headerlink" href="#full-text-search-queries" title="Permanent link">&para;</a></h4>
<p>Full-text search aggregates corpus statistics across all generations for globally-comparable BM25 scores.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>GlobalLimitExec: limit=k
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>  SortExec: order_by=[_bm25 DESC]
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>    FilterStaleExec: bloom_filters=[bf[region_A][gen=2], bf[region_A][gen=1], bf[region_B][gen=3], bf[region_B][gen=2], bf[region_B][gen=1]]
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>      GlobalBM25Exec                       # Aggregates stats across all generations
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>        UnionExec
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>          # Base table (shared)
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>          FTSExec: base_table[gen=-1], query=&quot;search terms&quot;
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>          # Region A MemTables
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>          FTSExec: region_A[gen=2], query=&quot;search terms&quot;
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>          FTSExec: region_A[gen=1], query=&quot;search terms&quot;
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>          # Region B MemTables
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>          FTSExec: region_B[gen=3], query=&quot;search terms&quot;
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a>          FTSExec: region_B[gen=2], query=&quot;search terms&quot;
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a>          FTSExec: region_B[gen=1], query=&quot;search terms&quot;
</span></code></pre></div>
<p><code>GlobalBM25Exec</code> collects document counts and term frequencies from all FTS indexes, computes global BM25 parameters, and passes them to each <code>FTSExec</code> for comparable scoring.</p>
<h2 id="appendices">Appendices<a class="headerlink" href="#appendices" title="Permanent link">&para;</a></h2>
<h3 id="appendix-1-writer-fencing-example">Appendix 1: Writer Fencing Example<a class="headerlink" href="#appendix-1-writer-fencing-example" title="Permanent link">&para;</a></h3>
<p>This example demonstrates how epoch-based fencing prevents data corruption when two writers compete for the same region.</p>
<h4 id="initial-state">Initial State<a class="headerlink" href="#initial-state" title="Permanent link">&para;</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>Region manifest (version 1):
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>  writer_epoch: 5
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>  replay_after_wal_id: 10
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>  wal_id_last_seen: 12
</span></code></pre></div>
<h4 id="scenario">Scenario<a class="headerlink" href="#scenario" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Step</th>
<th>Writer A</th>
<th>Writer B</th>
<th>Manifest State</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Loads manifest, sees epoch=5</td>
<td></td>
<td>epoch=5, version=1</td>
</tr>
<tr>
<td>2</td>
<td>Increments to epoch=6, writes manifest v2</td>
<td></td>
<td>epoch=6, version=2</td>
</tr>
<tr>
<td>3</td>
<td>Starts writing WAL entries 13, 14, 15</td>
<td></td>
<td></td>
</tr>
<tr>
<td>4</td>
<td></td>
<td>Loads manifest v2, sees epoch=6</td>
<td>epoch=6, version=2</td>
</tr>
<tr>
<td>5</td>
<td></td>
<td>Increments to epoch=7, writes manifest v3</td>
<td>epoch=7, version=3</td>
</tr>
<tr>
<td>6</td>
<td></td>
<td>Starts writing WAL entries 16, 17</td>
<td></td>
</tr>
<tr>
<td>7</td>
<td>Tries to flush MemTable, loads manifest</td>
<td></td>
<td></td>
</tr>
<tr>
<td>8</td>
<td>Sees epoch=7, but local epoch=6</td>
<td></td>
<td></td>
</tr>
<tr>
<td>9</td>
<td><strong>Writer A is fenced!</strong> Aborts all operations</td>
<td></td>
<td></td>
</tr>
<tr>
<td>10</td>
<td></td>
<td>Continues writing normally</td>
<td>epoch=7, version=3</td>
</tr>
</tbody>
</table>
<h4 id="what-happens-to-writer-as-wal-entries">What Happens to Writer A's WAL Entries?<a class="headerlink" href="#what-happens-to-writer-as-wal-entries" title="Permanent link">&para;</a></h4>
<p>Writer A wrote WAL entries 13, 14, 15 with <code>writer_epoch=6</code> in their schema metadata.</p>
<p>When Writer B performs crash recovery or MemTable flush:</p>
<ol>
<li>Reads WAL entries sequentially starting from <code>replay_after_wal_id + 1</code> (entry 13)</li>
<li>For each entry, checks existence using HEAD request on the bit-reversed filename</li>
<li>Continues until an entry is not found (e.g., entry 18 doesn't exist)</li>
<li>Finds entries 13, 14, 15, 16, 17</li>
<li>Reads each file's <code>writer_epoch</code> from schema metadata</li>
<li>Entries 13, 14, 15 have <code>writer_epoch=6</code> which is &lt;= current epoch (7) -&gt; <strong>valid, will be replayed</strong></li>
<li>Entries 16, 17 have <code>writer_epoch=7</code> -&gt; <strong>valid, will be replayed</strong></li>
</ol>
<h4 id="key-points">Key Points<a class="headerlink" href="#key-points" title="Permanent link">&para;</a></h4>
<ol>
<li>
<p><strong>No data loss</strong>: Writer A's entries are not discarded. They were written with a valid epoch at the time and will be included in recovery.</p>
</li>
<li>
<p><strong>Consistency preserved</strong>: Writer A is prevented from making further writes that could conflict with Writer B.</p>
</li>
<li>
<p><strong>Orphaned files are safe</strong>: WAL files from fenced writers remain on storage and are replayed by the new writer. They are only garbage collected after being included in a flushed MemTable that has been merged.</p>
</li>
<li>
<p><strong>Epoch validation timing</strong>: Writers check their epoch before manifest updates (MemTable flush), not on every WAL write. This keeps the hot path fast while ensuring consistency at commit boundaries.</p>
</li>
</ol>
<h3 id="appendix-2-concurrent-merger-example">Appendix 2: Concurrent Merger Example<a class="headerlink" href="#appendix-2-concurrent-merger-example" title="Permanent link">&para;</a></h3>
<p>This example demonstrates how MemWAL Index and conflict resolution handle concurrent mergers safely.</p>
<h4 id="initial-state_1">Initial State<a class="headerlink" href="#initial-state_1" title="Permanent link">&para;</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>MemWAL Index:
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>  merged_generations: {region: 5}
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>Region manifest (version 1):
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>  current_generation: 8
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>  flushed_generations: [(6, &quot;abc123_gen_6&quot;), (7, &quot;def456_gen_7&quot;)]
</span></code></pre></div>
<h4 id="scenario-1-racing-on-the-same-generation">Scenario 1: Racing on the Same Generation<a class="headerlink" href="#scenario-1-racing-on-the-same-generation" title="Permanent link">&para;</a></h4>
<p>Two mergers both try to merge generation 6 concurrently.</p>
<table>
<thead>
<tr>
<th>Step</th>
<th>Merger A</th>
<th>Merger B</th>
<th>MemWAL Index</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Reads index: merged_gen=5</td>
<td></td>
<td>merged_gen=5</td>
</tr>
<tr>
<td>2</td>
<td>Reads region manifest</td>
<td></td>
<td></td>
</tr>
<tr>
<td>3</td>
<td>Starts merging gen 6</td>
<td></td>
<td></td>
</tr>
<tr>
<td>4</td>
<td></td>
<td>Reads index: merged_gen=5</td>
<td>merged_gen=5</td>
</tr>
<tr>
<td>5</td>
<td></td>
<td>Reads region manifest</td>
<td></td>
</tr>
<tr>
<td>6</td>
<td></td>
<td>Starts merging gen 6</td>
<td></td>
</tr>
<tr>
<td>7</td>
<td>Commits (merged_gen=6)</td>
<td></td>
<td><strong>merged_gen=6</strong></td>
</tr>
<tr>
<td>8</td>
<td></td>
<td>Tries to commit</td>
<td></td>
</tr>
<tr>
<td>9</td>
<td></td>
<td><strong>Conflict</strong>: reads new index</td>
<td></td>
</tr>
<tr>
<td>10</td>
<td></td>
<td>Sees merged_gen=6 &gt;= 6, aborts</td>
<td></td>
</tr>
<tr>
<td>11</td>
<td></td>
<td>Reloads, continues to gen 7</td>
<td></td>
</tr>
</tbody>
</table>
<p>Merger B's conflict resolution detected that generation 6 was already merged by checking the MemWAL Index in the conflicting commit.</p>
<h4 id="scenario-2-crash-after-table-commit">Scenario 2: Crash After Table Commit<a class="headerlink" href="#scenario-2-crash-after-table-commit" title="Permanent link">&para;</a></h4>
<p>Merger A crashes after committing to the table.</p>
<table>
<thead>
<tr>
<th>Step</th>
<th>Merger A</th>
<th>Merger B</th>
<th>MemWAL Index</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Reads index: merged_gen=5</td>
<td></td>
<td>merged_gen=5</td>
</tr>
<tr>
<td>2</td>
<td>Merges gen 6, commits</td>
<td></td>
<td><strong>merged_gen=6</strong></td>
</tr>
<tr>
<td>3</td>
<td><strong>CRASH</strong></td>
<td></td>
<td>merged_gen=6</td>
</tr>
<tr>
<td>4</td>
<td></td>
<td>Reads index: merged_gen=6</td>
<td>merged_gen=6</td>
</tr>
<tr>
<td>5</td>
<td></td>
<td>Reads region manifest</td>
<td></td>
</tr>
<tr>
<td>6</td>
<td></td>
<td><strong>Skips gen 6</strong> (already merged)</td>
<td></td>
</tr>
<tr>
<td>7</td>
<td></td>
<td>Merges gen 7, commits</td>
<td><strong>merged_gen=7</strong></td>
</tr>
</tbody>
</table>
<p>The MemWAL Index is the single source of truth. Merger B correctly used it to determine that generation 6 was already merged.</p>
<h4 id="key-points_1">Key Points<a class="headerlink" href="#key-points_1" title="Permanent link">&para;</a></h4>
<ol>
<li>
<p><strong>Single source of truth</strong>: <code>merged_generations</code> is the authoritative source for merge progress, updated atomically with data.</p>
</li>
<li>
<p><strong>Conflict resolution uses MemWAL Index</strong>: When a commit conflicts, the merger checks the conflicting commit's MemWAL Index.</p>
</li>
<li>
<p><strong>No progress regression</strong>: Because MemWAL Index is updated atomically with data, concurrent mergers cannot regress the merge progress.</p>
</li>
</ol>
<h3 id="appendix-3-execution-nodes">Appendix 3: Execution Nodes<a class="headerlink" href="#appendix-3-execution-nodes" title="Permanent link">&para;</a></h3>
<p>This appendix describes custom execution nodes for MemWAL query execution.</p>
<h4 id="deduplicateexec">DeduplicateExec<a class="headerlink" href="#deduplicateexec" title="Permanent link">&para;</a></h4>
<p>Deduplicates rows by primary key, keeping the row with highest <code>(_gen, _rowaddr)</code>.
Since each dataset has a fixed <code>_gen</code> and rows are naturally ordered by <code>_rowaddr</code>, this can be implemented as a streaming operator without full materialization.</p>
<h4 id="takelastexec">TakeLastExec<a class="headerlink" href="#takelastexec" title="Permanent link">&para;</a></h4>
<p>Efficiently finds the last matching row for a filter predicate without full scan.
If the primary key has a btree index, directly queries the btree to get the result.
Otherwise, scans fragments in reverse order and within each fragment takes the last matching row.
Returns immediately upon finding a match, avoiding unnecessary I/O on earlier fragments.</p>
<h4 id="coalescefirstexec">CoalesceFirstExec<a class="headerlink" href="#coalescefirstexec" title="Permanent link">&para;</a></h4>
<p>Returns the first non-empty result from multiple inputs with short-circuit evaluation.
Inputs are evaluated lazily in order; on first non-empty result, remaining inputs are not evaluated.</p>
<h4 id="filterstaleexec">FilterStaleExec<a class="headerlink" href="#filterstaleexec" title="Permanent link">&para;</a></h4>
<p>Filters out rows that have a newer version in a higher generation.
For each candidate with primary key <code>pk</code> from generation G, checks bloom filters of generations &gt; G.
If the bloom filter indicates the key may exist in a newer generation, the candidate is filtered out.
False positives from bloom filters may cause some valid results to be filtered, but this is acceptable for search workloads where approximate results are expected.</p>
<h4 id="bloomfilterguardexec">BloomFilterGuardExec<a class="headerlink" href="#bloomfilterguardexec" title="Permanent link">&para;</a></h4>
<p>Guards a child execution node with a bloom filter check.
Given a primary key, checks the bloom filter before executing the child node.
If the bloom filter returns negative (key definitely not present), returns empty without executing the child.
If the bloom filter returns positive (key may be present), executes the child node normally.
Used in point lookups to skip unnecessary scans of generations that don't contain the target key.</p>
<h3 id="appendix-4-index-catchup-example">Appendix 4: Index Catchup Example<a class="headerlink" href="#appendix-4-index-catchup-example" title="Permanent link">&para;</a></h3>
<p>This example demonstrates how <code>index_catchup</code> enables indexed reads during async index rebuilding.</p>
<h4 id="scenario-setup">Scenario Setup<a class="headerlink" href="#scenario-setup" title="Permanent link">&para;</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>Generation:         1       2       3       4       5       6
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>                    |       |       |       |       |       |
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>State:           merged  merged  merged  merged flushed  active
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>                    |       |       |       |               |
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>Base IVF index:  [--   covers 1-3   --]     |               |
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>                                                          
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>                        index_gen=3    merged_gen=4         |
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>                                                      current_gen=6
</span></code></pre></div>
<p>In this example:</p>
<ul>
<li><strong>Generations 1-4</strong> have been merged to the base table (<code>merged_gen=4</code>)</li>
<li><strong>Base IVF index</strong> has only been rebuilt to cover generations 1-3 (<code>index_gen=3</code>)</li>
<li><strong>Generation 4</strong> is in the base table but NOT covered by the base IVF index</li>
<li><strong>Generation 5</strong> is flushed to disk (not yet merged to base table)</li>
<li><strong>Generation 6</strong> is the active in-memory MemTable</li>
</ul>
<h4 id="example-read-strategy-for-vector-search">Example Read Strategy for Vector Search<a class="headerlink" href="#example-read-strategy-for-vector-search" title="Permanent link">&para;</a></h4>
<p>Without <code>index_catchup</code> tracking, the query planner would need to perform an expensive full scan on the base table for generation 4.
With <code>index_catchup</code>, the planner knows exactly which data is indexed and can use flushed MemTable indexes for the gap:</p>
<table>
<thead>
<tr>
<th>Data Source</th>
<th>Generations</th>
<th>Strategy</th>
</tr>
</thead>
<tbody>
<tr>
<td>Base table with IVF index</td>
<td>1-3</td>
<td>Use base table's IVF index</td>
</tr>
<tr>
<td>Flushed MemTable gen 4</td>
<td>4</td>
<td>Use flushed MemTable's IVF index</td>
</tr>
<tr>
<td>Flushed MemTable gen 5</td>
<td>5</td>
<td>Use flushed MemTable's IVF index</td>
</tr>
<tr>
<td>Active MemTable</td>
<td>6</td>
<td>Use in-memory IVF index</td>
</tr>
</tbody>
</table>
<p>All data sources provide indexed access, maintaining query performance during async index rebuild.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
       2025 Lance Format. All rights reserved.
    </div>
  
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/lance-format/lance" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://discord.gg/lance" target="_blank" rel="noopener" title="discord.gg" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1.1s-.6.4-.8.8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2C162.5 39 122.2 51.5 84.1 69c-.3.1-.6.4-.8.7C7.1 183.5-13.8 294.6-3.6 404.2c0 .3.1.5.2.8s.3.4.5.6c44.4 32.9 94 58 146.8 74.2.4.1.8.1 1.1 0s.7-.4.9-.7c11.3-15.4 21.4-31.8 30-48.8.1-.2.2-.5.2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6.2-.9.3-.5.6-.7c3.1-2.3 6.2-4.7 9.1-7.1.3-.2.6-.4.9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1.7-.2 1-.2s.7.2.9.4c2.9 2.4 6 4.9 9.1 7.2.2.2.4.4.6.7s.2.6.2.9-.1.6-.3.9-.4.5-.6.6c-14.7 8.6-30 15.9-45.9 21.8-.2.1-.5.2-.7.4s-.3.4-.4.7-.1.5-.1.8.1.5.2.8c8.8 17 18.8 33.3 30 48.8.2.3.6.6.9.7s.8.1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2.2-.2.4-.4.5-.6s.2-.5.2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2m195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.tabs", "navigation.sections", "navigation.instant", "navigation.indexes", "navigation.tracking", "navigation.top", "search.highlight", "search.share", "content.code.copy", "content.code.annotate"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../../assets/javascript/termynal.js"></script>
      
    
  </body>
</html>